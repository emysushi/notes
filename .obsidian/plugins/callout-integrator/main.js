/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => calloutIntegrator
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var calloutIntegrator = class extends import_obsidian.Plugin {
  onload() {
    function anchorhead(head, anchor) {
      if (head.line > anchor.line) {
        return true;
      } else if (head.line < anchor.line) {
        return false;
      } else {
        if (head.ch > anchor.ch) {
          return true;
        } else {
          return false;
        }
      }
    }
    this.addCommand({
      id: "callout-integrate",
      name: "integrate",
      editorCallback: (editor) => {
        let selection = editor.getSelection();
        if (editor.somethingSelected()) {
          let selectHead = editor.getCursor("head");
          let selectAnchor = editor.getCursor("anchor");
          editor.replaceSelection("> " + selection.replace(/\n/g, "\n> "));
          if (anchorhead(selectHead, selectAnchor)) {
            selectHead.ch += 2;
          } else {
            selectAnchor.ch += 2;
          }
          editor.setSelection(selectAnchor, selectHead);
        } else {
          let cursorPos = editor.getCursor();
          let currentLine = editor.getLine(cursorPos.line);
          editor.setLine(cursorPos.line, "> " + currentLine);
          cursorPos.ch += 2;
          editor.setCursor(cursorPos);
        }
      }
    });
    this.addCommand({
      id: "callout-unintegrate",
      name: "un-integrate",
      editorCallback: (editor) => {
        let selection = editor.getSelection();
        if (editor.somethingSelected()) {
          let selectHead = editor.getCursor("head");
          let selectAnchor = editor.getCursor("anchor");
          let movement = 0;
          if (selection.charAt(0) === ">") {
            selection = selection.substring(1);
            movement--;
            if (selection.charAt(0) === " ") {
              selection = selection.substring(1);
              movement--;
            }
          }
          if (anchorhead(selectHead, selectAnchor)) {
            selectHead.ch += movement;
          } else {
            selectAnchor.ch += movement;
          }
          editor.replaceSelection(selection.replace(/\n> /g, "\n"));
          editor.setSelection(selectAnchor, selectHead);
        } else {
          let cursorPos = editor.getCursor();
          let currentLine = editor.getLine(cursorPos.line);
          if (currentLine.charAt(0) === ">") {
            currentLine = currentLine.substring(1);
            cursorPos.ch--;
            if (currentLine.charAt(0) === " ") {
              currentLine = currentLine.substring(1);
              cursorPos.ch--;
            }
            editor.setLine(cursorPos.line, currentLine);
            editor.setCursor(cursorPos);
          }
        }
      }
    });
  }
  onunload() {
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIEVkaXRvclBvc2l0aW9uLCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBjYWxsb3V0SW50ZWdyYXRvciBleHRlbmRzIFBsdWdpbiB7XG5cblx0b25sb2FkKCkge1xuXHRcdGZ1bmN0aW9uIGFuY2hvcmhlYWQoaGVhZDogRWRpdG9yUG9zaXRpb24sIGFuY2hvcjogRWRpdG9yUG9zaXRpb24pOiBib29sZWFuIHtcblx0XHRcdGlmIChoZWFkLmxpbmUgPiBhbmNob3IubGluZSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAoaGVhZC5saW5lIDwgYW5jaG9yLmxpbmUpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGhlYWQuY2ggPiBhbmNob3IuY2gpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblxuXHRcdC8qKiogQUREUyBcIj4gXCIgQVQgQkVHSU5OSU5HIE9GIEVBQ0ggTElORSAqKiovXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY2FsbG91dC1pbnRlZ3JhdGUnLFxuXHRcdFx0bmFtZTogJ2ludGVncmF0ZScsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XG5cblx0XHRcdFx0bGV0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTsgXHRcdFx0XHRcdFx0XHRcdFx0Ly9nZXRzIGhpZ2hsaWdodGVkIHNlbGVjdGlvblxuXG5cdFx0XHRcdGlmIChlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSkgeyAvL2lmIHRleHQgaGlnaGxpZ2h0ZWQgLT4gaW50ZWdyYXRlIHdob2xlIGJsb2NrXG5cblx0XHRcdFx0XHRsZXQgc2VsZWN0SGVhZCA9IGVkaXRvci5nZXRDdXJzb3IoJ2hlYWQnKTtcdFx0XHRcdFx0XHRcdC8vZ2V0cyBiZWdpbm5pbmcvZW5kIG9mIGhpZ2hsaWdodGVkIHNlY3Rpb25cdFx0XHRcblx0XHRcdFx0XHRsZXQgc2VsZWN0QW5jaG9yID0gZWRpdG9yLmdldEN1cnNvcignYW5jaG9yJyk7XG5cblx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihcIj4gXCIgKyBzZWxlY3Rpb24ucmVwbGFjZSgvXFxuL2csIFwiXFxuPiBcIikpOyBcdC8vYWRkcyBcIj4gXCIgYmVmb3JlIGVhY2ggbGluZTsgbmVlZCB0aGUgaW5pdGlhbCBcIj4gXCIgc2VwYXJhdGVseSBhcyBpdCBkb2Vzbid0IHJlZ2lzdGVyIGFzIGEgbmV3IGxpbmVcblxuXHRcdFx0XHRcdGlmIChhbmNob3JoZWFkKHNlbGVjdEhlYWQsIHNlbGVjdEFuY2hvcikpIHtcblx0XHRcdFx0XHRcdHNlbGVjdEhlYWQuY2ggKz0gMjtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZWN0QW5jaG9yLmNoICs9IDI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVkaXRvci5zZXRTZWxlY3Rpb24oc2VsZWN0QW5jaG9yLCBzZWxlY3RIZWFkKTtcdFx0XHRcdFx0XHQvL3JlLWhpZ2hsaWdodHMgdGV4dFxuXG5cdFx0XHRcdH0gZWxzZSB7IC8vaWYgbm8gdGV4dCBoaWdobGlnaHRlZCAtPiBpbnRlZ3JhdGUgbGluZSBjb250YWluaW5nIGN1cnNvclxuXG5cdFx0XHRcdFx0bGV0IGN1cnNvclBvcyA9IGVkaXRvci5nZXRDdXJzb3IoKTtcdFx0XHRcdFx0XHRcdFx0XHQvL2dldHMgY3Vyc29yIHBvc2l0aW9uXG5cblx0XHRcdFx0XHRsZXQgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3JQb3MubGluZSk7XHRcdFx0XHRcdC8vYWRkIFwiPiBcIiBhdCBiZWdpbm5pbmcgb2YgbGluZVxuXHRcdFx0XHRcdGVkaXRvci5zZXRMaW5lKGN1cnNvclBvcy5saW5lLCAoXCI+IFwiICsgY3VycmVudExpbmUpKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjdXJzb3JQb3MuY2ggKz0gMjtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vbW92ZXMgY3Vyc29yIHRvIGNvbXBlbnNhdGUgZm9yIGFkZGVkIGNoYXJhY3RlcnNcblx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvclBvcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NhbGxvdXQtdW5pbnRlZ3JhdGUnLFxuXHRcdFx0bmFtZTogJ3VuLWludGVncmF0ZScsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XG5cblx0XHRcdFx0bGV0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTsgXHRcdFx0XHRcdFx0XHRcdFx0Ly9nZXRzIGhpZ2hsaWdodGVkIHNlbGVjdGlvblxuXG5cdFx0XHRcdGlmIChlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSkgeyAvL2lmIHRleHQgaGlnaGxpZ2h0ZWQgLT4gcmVtb3ZlIGFsbCBcIj4gXCIgZm9sbG93aW5nIGEgbGluZSBicmVha1xuXG5cdFx0XHRcdFx0bGV0IHNlbGVjdEhlYWQgPSBlZGl0b3IuZ2V0Q3Vyc29yKCdoZWFkJyk7XHRcdFx0XHRcdFx0XHQvL2dldCBiZWdpbm5pbmcvZW5kIHBvc2l0aW9uIG9mIGhpZ2hsaWdodGVkIHNlY3Rpb25cblx0XHRcdFx0XHRsZXQgc2VsZWN0QW5jaG9yID0gZWRpdG9yLmdldEN1cnNvcignYW5jaG9yJyk7XG5cdFx0XHRcdFx0bGV0IG1vdmVtZW50ID0gMDtcblxuXHRcdFx0XHRcdGlmIChzZWxlY3Rpb24uY2hhckF0KDApID09PSAnPicpIHsgXHRcdFx0XHRcdFx0XHRcdFx0Ly9maW5kIGFuZCBjdXQgaW5pdGlhbCBcIj5cIlxuXHRcdFx0XHRcdFx0c2VsZWN0aW9uID0gc2VsZWN0aW9uLnN1YnN0cmluZygxKTtcblxuXHRcdFx0XHRcdFx0bW92ZW1lbnQgLS07XG5cblx0XHRcdFx0XHRcdGlmIChzZWxlY3Rpb24uY2hhckF0KDApID09PSAnICcpIHtcdFx0XHRcdFx0XHRcdFx0Ly9maW5kIGFuZCBjdXQgaW5pdGlhbCBcIiBcIlxuXHRcdFx0XHRcdFx0XHRzZWxlY3Rpb24gPSBzZWxlY3Rpb24uc3Vic3RyaW5nKDEpO1xuXG5cdFx0XHRcdFx0XHRcdG1vdmVtZW50IC0tO1xuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhbmNob3JoZWFkKHNlbGVjdEhlYWQsIHNlbGVjdEFuY2hvcikpIHtcblx0XHRcdFx0XHRzZWxlY3RIZWFkLmNoICs9IG1vdmVtZW50O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGVjdEFuY2hvci5jaCArPSBtb3ZlbWVudDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHNlbGVjdGlvbi5yZXBsYWNlKC9cXG4+IC9nLCBcIlxcblwiKSk7IFx0XHRcdC8vIGN1dHMgZXZlcnkgXCI+IFwiIG9jY3VycmluZyBhZnRlciBhIG5ldyBsaW5lXG5cdFx0XHRcdGVkaXRvci5zZXRTZWxlY3Rpb24oc2VsZWN0QW5jaG9yLCBzZWxlY3RIZWFkKTtcdFx0XHRcdFx0XHQvL3JlLWhpZ2hsaWdodCBibG9ja1xuXHRcdFx0XHRcblx0XHRcdFx0fSBlbHNlIHsgLy9pZiBubyB0ZXh0IGhpZ2hsaWdodGVkIC0+IGN1dCBcIj4gXCIgYXQgYmVnaW5uaW5nIG9mIGxpbmVcblxuXHRcdFx0XHRcdGxldCBjdXJzb3JQb3MgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHRcdFx0XHRcdFx0XHRcdC8vZ2V0IGN1cnNvciBwb3NpdGlvbiBhbmQgbGluZSBudW1iZXJcblx0XHRcdFx0XHRsZXQgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3JQb3MubGluZSk7XG5cblx0XHRcdFx0XHRpZiAoY3VycmVudExpbmUuY2hhckF0KDApID09PSAnPicpIHtcdFx0XHRcdFx0XHRcdC8vY3V0IFwiPlwiXG5cdFx0XHRcdFx0XHRjdXJyZW50TGluZSA9IGN1cnJlbnRMaW5lLnN1YnN0cmluZygxKTtcblx0XHRcdFx0XHRcdGN1cnNvclBvcy5jaCAtLTtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly9tb3ZlIGN1cnNvciB0byBjb21wZW5zYXRlXG5cblx0XHRcdFx0XHRcdGlmIChjdXJyZW50TGluZS5jaGFyQXQoMCkgPT09ICcgJykge1x0XHRcdFx0XHRcdC8vY3V0IFwiIFwiXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRMaW5lID0gY3VycmVudExpbmUuc3Vic3RyaW5nKDEpO1xuXHRcdFx0XHRcdFx0XHRjdXJzb3JQb3MuY2ggLS07XHRcdFx0XHRcdFx0XHRcdFx0XHQvL21vdmUgY3Vyc29yIHRvIGNvbXBlbnNhdGVcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldExpbmUoY3Vyc29yUG9zLmxpbmUsIGN1cnJlbnRMaW5lKTtcdFx0XHRcdC8vcHVzaCBjaGFuZ2VzIHRvIG5ldyBsaW5lXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvclBvcyk7XHRcdFx0XHRcdFx0XHRcdC8vZXhlY3V0ZSBjdXJzb3IgbW92ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblxuXHR9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUE0RztBQUc1RyxJQUFxQixvQkFBckIsY0FBK0MsdUJBQU87QUFBQSxFQUVyRCxT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
