/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    async function ensureFolderExists(path) {
      const dirs = path.replace(/\\/g, "/").split("/");
      dirs.pop();
      if (dirs.length) {
        const dir = join(...dirs);
        if (!window.app.vault.getAbstractFileByPath(dir)) {
          await window.app.vault.createFolder(dir);
        }
      }
    }
    async function getNotePath(directory, filename) {
      if (!filename.endsWith(".md")) {
        filename += ".md";
      }
      const path = obsidian.normalizePath(join(directory, filename));
      await ensureFolderExists(path);
      return path;
    }
    async function getTemplateInfo(template) {
      const { metadataCache, vault } = window.app;
      const templatePath = obsidian.normalizePath(template);
      if (templatePath === "/") {
        return Promise.resolve(["", null]);
      }
      try {
        const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
        const contents = await vault.cachedRead(templateFile);
        const IFoldInfo = window.app.foldManager.load(templateFile);
        return [contents, IFoldInfo];
      } catch (err) {
        console.error(`Failed to read the daily note template '${templatePath}'`, err);
        new obsidian.Notice("Failed to read the daily note template");
        return ["", null];
      }
    }
    function getDateUID(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(
              filename,
              // If format contains week, remove day & month formatting
              format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""),
              false
            );
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    async function createDailyNote2(date) {
      const app2 = window.app;
      const { vault } = app2;
      const moment2 = window.moment;
      const { template, format, folder } = getDailyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment2().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = moment2();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
        app2.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "day");
          if (date) {
            const dateString = getDateUID(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek() {
      const { moment: moment2 } = window;
      let weekStart = moment2.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue(dayOfWeekName) {
      return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
    }
    async function createWeeklyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getWeeklyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
          const day = getDayOfWeekNumericalValue(dayOfWeek);
          return date.weekday(day).format(momentFormat.trim());
        }));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getWeeklyNote(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "week");
          if (date) {
            const dateString = getDateUID(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    async function createMonthlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getMonthlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getMonthlyNote(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "month");
          if (date) {
            const dateString = getDateUID(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    async function createQuarterlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getQuarterlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "quarter");
          if (date) {
            const dateString = getDateUID(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    async function createYearlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getYearlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getYearlyNote(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "year");
          if (date) {
            const dateString = getDateUID(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded2() {
      var _a, _b;
      const { app: app2 } = window;
      const dailyNotesPlugin = app2.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      if (app2.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote(granularity, date) {
      const createFn = {
        day: createDailyNote2,
        month: createMonthlyNote,
        week: createWeeklyNote
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded2;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote2;
    exports.createMonthlyNote = createMonthlyNote;
    exports.createPeriodicNote = createPeriodicNote;
    exports.createQuarterlyNote = createQuarterlyNote;
    exports.createWeeklyNote = createWeeklyNote;
    exports.createYearlyNote = createYearlyNote;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes;
    exports.getAllWeeklyNotes = getAllWeeklyNotes;
    exports.getAllYearlyNotes = getAllYearlyNotes;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID;
    exports.getMonthlyNote = getMonthlyNote;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ObsidianRewarder,
  displayModal: () => displayModal,
  getDailyNoteFile: () => getDailyNoteFile
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");
var import_obsidian_daily_notes_interface = __toESM(require_main());
var import_obsidian_daily_notes_interface2 = __toESM(require_main());

// settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  completedTaskCharacter: "\u2611\uFE0F",
  escapeCharacterBegin: "{",
  escapeCharacterEnd: "}",
  occurrenceTypes: [
    { label: "common", value: 20 },
    { label: "rare", value: 5 },
    { label: "legendary", value: 0.5 }
  ],
  rewardsFile: "Rewards.md",
  saveRewardToDaily: false,
  saveTaskToDaily: false,
  showModal: true,
  useAsInspirational: false
};
var ObsidianRewarderSettings = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  sanitiseNote(value) {
    if (value === null || value.match(/^\s*$/) !== null) {
      return null;
    }
    return (0, import_obsidian.normalizePath)(value);
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "Functionality settings" });
    new import_obsidian.Setting(this.containerEl).setName("File with Rewards").setDesc('For example "Rewards.md" or "Folder/Rewards.md"').addText((text) => {
      text.setPlaceholder(DEFAULT_SETTINGS.rewardsFile).setValue(
        this.plugin.settings.rewardsFile.length > 0 ? this.plugin.settings.rewardsFile : ""
      ).onChange(async (value) => {
        this.plugin.settings.rewardsFile = this.sanitiseNote(value) || DEFAULT_SETTINGS.rewardsFile;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(this.containerEl).setName("Show popup when reward is awarded").setDesc("If disabled a less prominent notice will be shown instead").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showModal);
      toggle.onChange(async (value) => {
        this.plugin.settings.showModal = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(this.containerEl).setName("Save rewards in daily note").setDesc("Will save rewards received to the end of the daily note").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.saveRewardToDaily);
      toggle.onChange(async (value) => {
        this.plugin.settings.saveRewardToDaily = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(this.containerEl).setName("Save task in daily note").setDesc("Will save completed tasks to the end of the daily note").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.saveTaskToDaily);
      toggle.onChange(async (value) => {
        this.plugin.settings.saveTaskToDaily = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(this.containerEl).setName("Use with quotes instead of rewards").setDesc(
      "Rewards are shown as inspirational quotes instead of congratulations"
    ).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.useAsInspirational);
      toggle.onChange(async (value) => {
        this.plugin.settings.useAsInspirational = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h1", { text: "Reward settings" });
    containerEl.createEl("h3", {
      text: "Occurrence values"
    });
    for (let i = 0; i < Object.keys(this.plugin.settings.occurrenceTypes).length; i++) {
      new import_obsidian.Setting(containerEl).setName(
        "How often should " + this.plugin.settings.occurrenceTypes[i].label + " rewards occur?"
      ).setDesc(
        "Between 0.1% to 100% for every finished task" + (i === 0 ? ". This is the default value for rewards" : "")
      ).addText((text) => {
        text.inputEl.type = "number";
        text.setPlaceholder(this.plugin.settings.occurrenceTypes[i].value).setValue(this.plugin.settings.occurrenceTypes[i].value.toString()).onChange(async (value) => {
          if (value.length > 0) {
            let refreshDisplay = false;
            if (value > 100) {
              value = 100;
              refreshDisplay = true;
            } else if (value < 0.1) {
              value = 0.1;
              refreshDisplay = true;
            }
            this.plugin.settings.occurrenceTypes[i].value = Number(value);
            await this.plugin.saveSettings();
            if (refreshDisplay) {
              this.display();
            }
          }
        });
      }).addExtraButton(
        (button) => button.setIcon("reset").setTooltip("Restore default").onClick(async () => {
          this.plugin.settings.occurrenceTypes[i].value = DEFAULT_SETTINGS.occurrenceTypes[i].value;
          await this.plugin.saveSettings();
          this.display();
        })
      );
    }
    containerEl.createEl("h3", {
      text: "Occurence labels"
    });
    for (let i = 0; i < Object.keys(this.plugin.settings.occurrenceTypes).length; i++) {
      new import_obsidian.Setting(containerEl).setName(
        'Would you like to rename "' + this.plugin.settings.occurrenceTypes[i].label + '"?'
      ).addText((text) => {
        text.inputEl.type = "text";
        text.setPlaceholder(this.plugin.settings.occurrenceTypes[i].label).setValue(this.plugin.settings.occurrenceTypes[i].label).onChange(async (value) => {
          if (value.length > 0) {
            this.plugin.settings.occurrenceTypes[i].label = value;
            await this.plugin.saveSettings();
          }
        });
      }).addExtraButton(
        (button) => button.setIcon("reset").setTooltip("Restore default").onClick(async () => {
          this.plugin.settings.occurrenceTypes[i].label = DEFAULT_SETTINGS.occurrenceTypes[i].label;
          await this.plugin.saveSettings();
          this.display();
        })
      );
    }
    containerEl.createEl("h3", {
      text: "Special characters"
    });
    new import_obsidian.Setting(containerEl).setName("Completed task").setDesc(
      "This character is used as prefix for completed tasks in the daily note"
    ).addText(
      (text) => text.setPlaceholder("{").setValue(this.plugin.settings.completedTaskCharacter).onChange(async (value) => {
        if (value.length > 0) {
          this.plugin.settings.completedTaskCharacter = value;
          await this.plugin.saveSettings();
        }
      })
    ).addExtraButton(
      (button) => button.setIcon("reset").setTooltip("Restore default").onClick(async () => {
        this.plugin.settings.completedTaskCharacter = DEFAULT_SETTINGS.completedTaskCharacter;
        await this.plugin.saveSettings();
        this.display();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Start of metadata").setDesc("This character shows the start of the reward's data").addText(
      (text) => text.setPlaceholder("{").setValue(this.plugin.settings.escapeCharacterBegin).onChange(async (value) => {
        if (value.length > 0) {
          this.plugin.settings.escapeCharacterBegin = value;
          await this.plugin.saveSettings();
        }
      })
    ).addExtraButton(
      (button) => button.setIcon("reset").setTooltip("Restore default").onClick(async () => {
        this.plugin.settings.escapeCharacterBegin = DEFAULT_SETTINGS.escapeCharacterBegin;
        await this.plugin.saveSettings();
        this.display();
      })
    );
    new import_obsidian.Setting(containerEl).setName("End of metadata").setDesc("This character shows the end of the reward's data").addText((text) => {
      text.setPlaceholder("}").setValue(this.plugin.settings.escapeCharacterEnd).onChange(async (value) => {
        if (value.length > 0) {
          this.plugin.settings.escapeCharacterEnd = value;
          await this.plugin.saveSettings();
        }
      });
    }).addExtraButton(
      (button) => button.setIcon("reset").setTooltip("Restore default").onClick(async () => {
        this.plugin.settings.escapeCharacterEnd = DEFAULT_SETTINGS.escapeCharacterEnd;
        await this.plugin.saveSettings();
        this.display();
      })
    );
  }
};

// main.ts
async function getDailyNoteFile() {
  const file = (0, import_obsidian_daily_notes_interface2.getDailyNote)((0, import_obsidian2.moment)(), (0, import_obsidian_daily_notes_interface2.getAllDailyNotes)());
  if (!file) {
    return await (0, import_obsidian_daily_notes_interface2.createDailyNote)((0, import_obsidian2.moment)());
  }
  return file;
}
var ObsidianRewarder = class extends import_obsidian2.Plugin {
  async handleReward(clickedTaskText) {
    let arrayOfCleanedRewards = [];
    let chosenReward;
    let rewardsByOccurrence = {};
    const { vault } = this.app;
    let rewardsFile = vault.getAbstractFileByPath(this.settings.rewardsFile);
    let contents;
    try {
      contents = await this.app.vault.read(rewardsFile);
    } catch (e) {
      new import_obsidian2.Notice(
        "Obsidian Rewards couldn't open the rewards file.\nPlease check the path in the settings."
      );
      return;
    }
    var char = "\n";
    let x = 0;
    let y = 0;
    let dirtyRewards = [];
    while ((y = contents.indexOf(char, x)) !== -1) {
      dirtyRewards.push(contents.substring(x, y));
      x = y + 1;
    }
    dirtyRewards.push(contents.substring(x));
    for (let i = 0; i < dirtyRewards.length; i++) {
      const dirtyReward = dirtyRewards[i];
      let rewardsLeft = 1;
      let occurrence = this.settings.occurrenceTypes[0].label;
      let rewardName = "";
      let imageLink = "";
      let metadataValues = [];
      let metadataStart = [];
      let metadataEnd = [];
      let dirtyRewardWithPartialMetadataStripped = dirtyReward;
      for (let i2 = 0; i2 < 4; i2++) {
        metadataStart[i2] = dirtyRewardWithPartialMetadataStripped.indexOf(
          this.settings.escapeCharacterBegin
        );
        metadataEnd[i2] = dirtyRewardWithPartialMetadataStripped.indexOf(
          this.settings.escapeCharacterEnd,
          metadataStart[i2]
        );
        if (metadataStart[i2] < 0) {
          rewardName = dirtyRewardWithPartialMetadataStripped;
          break;
        } else {
          metadataValues[i2] = dirtyRewardWithPartialMetadataStripped.substring(
            metadataStart[i2] + 1,
            metadataEnd[i2]
          );
        }
        if (metadataValues[i2].substring(0, 6) === "app://" || metadataValues[i2].substring(0, 4) === "http") {
          imageLink = metadataValues[i2];
        } else if (/^\d+$/.test(metadataValues[i2])) {
          rewardsLeft = metadataValues[i2];
        } else {
          occurrence = metadataValues[i2];
        }
        dirtyRewardWithPartialMetadataStripped = dirtyRewardWithPartialMetadataStripped.replace(
          this.settings.escapeCharacterBegin + metadataValues[i2] + this.settings.escapeCharacterEnd,
          ""
        );
      }
      const rewardObject = {
        dirtyReward: dirtyRewards[i],
        rewardName: rewardName.replace(/\n|\t|\r|- |\* |\+ /g, "").trim(),
        rewardsLeft,
        occurrence,
        imageLink
      };
      if (rewardObject.rewardsLeft > 0) {
        arrayOfCleanedRewards.push(rewardObject);
        if (rewardsByOccurrence.hasOwnProperty(occurrence)) {
          rewardsByOccurrence[occurrence].push(rewardObject);
        } else {
          rewardsByOccurrence[occurrence] = [];
          rewardsByOccurrence[occurrence].push(rewardObject);
        }
      }
    }
    let foundOccurenceTypes = {
      [this.settings.occurrenceTypes[0].label]: 0,
      [this.settings.occurrenceTypes[1].label]: 0,
      [this.settings.occurrenceTypes[2].label]: 0
    };
    for (let i = 0; i < arrayOfCleanedRewards.length; i++) {
      foundOccurenceTypes[arrayOfCleanedRewards[i].occurrence] = foundOccurenceTypes[arrayOfCleanedRewards[i].occurrence] + 1;
    }
    let sumOfOccurrences = 0;
    for (let i = 0; i < this.settings.occurrenceTypes.length; i++) {
      if (foundOccurenceTypes[this.settings.occurrenceTypes[i].label] > 0) {
        sumOfOccurrences += this.settings.occurrenceTypes[i].value;
      }
    }
    if (sumOfOccurrences > 100) {
      const divideByThisToGetTo100 = sumOfOccurrences / 100;
      for (let i = 0; i < Object.keys(this.settings.occurrenceTypes).length; i++) {
        this.settings.occurrenceTypes[i].value = this.settings.occurrenceTypes[i].value / divideByThisToGetTo100;
      }
      sumOfOccurrences = this.settings.occurrenceTypes.reduce(
        (partialSum, a) => partialSum + a,
        0
      );
    }
    sumOfOccurrences = sumOfOccurrences * 10;
    const lotteryNumber = Math.floor(Math.random() * 1e3);
    if (lotteryNumber > sumOfOccurrences) {
      this.logToDailyNote(clickedTaskText, {}, true);
      return;
    }
    const objectOfOccurrences = {};
    for (let i = 0; i < this.settings.occurrenceTypes.length; i++) {
      objectOfOccurrences[this.settings.occurrenceTypes[i].label] = this.settings.occurrenceTypes[i].value;
    }
    const arrayOfOccurrences = Object.keys(foundOccurenceTypes);
    let checkedProbabilities = 0;
    for (let i = 0; i < arrayOfOccurrences.length; i++) {
      if (foundOccurenceTypes[arrayOfOccurrences[i]] > 0 && lotteryNumber < objectOfOccurrences[arrayOfOccurrences[i]] * 10 + checkedProbabilities) {
        const randomNumberToChooseRewardWithinOccurence = Math.floor(
          Math.random() * foundOccurenceTypes[arrayOfOccurrences[i]]
        );
        chosenReward = rewardsByOccurrence[arrayOfOccurrences[i]][randomNumberToChooseRewardWithinOccurence];
        break;
      }
      checkedProbabilities = checkedProbabilities + objectOfOccurrences[arrayOfOccurrences[i]] * 10;
    }
    let modifier;
    if (this.settings.showModal) {
      modifier = await displayModal(this.app, chosenReward, this.settings);
    } else {
      const stringToShow = this.settings.useAsInspirational ? chosenReward.rewardName : "\u{1F388} \u{1F389} \u{1F388} Congratulations! \u{1F388} \u{1F389} \u{1F388}\nBy completing this task you won this reward:\n \u2B50 " + chosenReward.rewardName + " \u2B50";
      new import_obsidian2.Notice(stringToShow);
    }
    let adjustedReward;
    if (chosenReward.rewardsLeft) {
      let newRewardsLeft = parseInt(chosenReward.rewardsLeft) + parseInt(modifier);
      adjustedReward = chosenReward.dirtyReward.replace(
        this.settings.escapeCharacterBegin + chosenReward.rewardsLeft + this.settings.escapeCharacterEnd,
        this.settings.escapeCharacterBegin + newRewardsLeft + this.settings.escapeCharacterEnd
      );
    } else {
      adjustedReward = chosenReward.dirtyReward;
    }
    let newContents = contents.replace(
      chosenReward.dirtyReward,
      adjustedReward
    );
    try {
      vault.modify(rewardsFile, newContents);
    } catch (e) {
      new import_obsidian2.Notice("Obsidian Rewards couldn't modify the rewards file.");
    }
    this.logToDailyNote(clickedTaskText, chosenReward, false);
  }
  async logToDailyNote(clickedTaskText, chosenReward, logTaskOnly) {
    let logText = this.settings.saveTaskToDaily ? this.settings.completedTaskCharacter + clickedTaskText + " ([[" + this.app.workspace.getActiveFile().basename + "]]) - " + (0, import_obsidian2.moment)().format("HH:mm") : "";
    logText = logText + (this.settings.saveRewardToDaily && logTaskOnly === false ? (logText.length > 0 ? "\r" : "") + "Earned reward: " + chosenReward.rewardName : "");
    if ((this.settings.saveRewardToDaily === true || this.settings.saveTaskToDaily === true) && (0, import_obsidian_daily_notes_interface.appHasDailyNotesPluginLoaded)() === true) {
      let file = (await getDailyNoteFile()).path;
      let existingContent = await this.app.vault.adapter.read(file);
      if (existingContent.length > 0) {
        existingContent = existingContent + "\r";
      }
      await this.app.vault.adapter.write(file, existingContent + logText);
    }
  }
  async createSampleNote(self) {
    let folder = app.fileManager.getNewFileParent("");
    const createdNote = await app.fileManager.createNewMarkdownFile(
      folder,
      "Rewards.md"
    );
    const sampleContentsForNote = "- Have a cup of tea\n- Watch an episode of favourite series " + self.settings.escapeCharacterBegin + self.settings.occurrenceTypes[1].label + self.settings.escapeCharacterEnd + " " + self.settings.escapeCharacterBegin + "20" + self.settings.escapeCharacterEnd + "\n- Knit for 15 minutes " + self.settings.escapeCharacterBegin + self.settings.occurrenceTypes[1].label + self.settings.escapeCharacterEnd + " \n- Open the birthday present champagne bottle " + self.settings.escapeCharacterBegin + self.settings.occurrenceTypes[2].label + self.settings.escapeCharacterEnd + " " + self.settings.escapeCharacterBegin + "1" + self.settings.escapeCharacterEnd;
    app.vault.modify(createdNote, sampleContentsForNote);
    new import_obsidian2.Notice("Created file " + createdNote.path);
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ObsidianRewarderSettings(this.app, this));
    this.addCommand({
      id: "create-sample-rewards-note",
      name: "Create sample rewards note",
      callback: () => {
        this.createSampleNote(this);
      }
    });
    let callback = (evt) => {
      if (evt.target instanceof HTMLInputElement && evt.target.type === "checkbox" && evt.target.checked) {
        evt.target.parentNode.innerText.length > 0 ? this.handleReward(evt.target.parentNode.innerText) : this.handleReward(evt.target.parentNode.parentNode.innerText);
      }
    };
    window.addEventListener("click", callback, { capture: true });
    this.register(
      () => window.removeEventListener("click", callback, { capture: true })
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
async function displayModal(app2, rewardObject, settings) {
  return new Promise((resolve, reject) => {
    try {
      const modal = new CongratulationsModal(app2, rewardObject, settings);
      modal.onClose = () => {
        resolve(modal.modifier);
      };
      modal.open();
    } catch (e) {
      reject();
    }
  });
}
var CongratulationsModal = class extends import_obsidian2.Modal {
  constructor(app2, rewardObject, settings) {
    super(app2);
    this.rewardObject = rewardObject;
    this.settings = settings;
    this.modifier = -1;
  }
  onOpen() {
    const { contentEl, containerEl } = this;
    const modal = contentEl.createEl("div", { cls: "rewarderModal" });
    if (this.settings.useAsInspirational) {
      modal.createEl("h1", {
        text: this.rewardObject.rewardName
      });
      modal.createEl("img", {
        attr: {
          src: this.rewardObject.imageLink
        }
      });
    } else {
      modal.createEl("h2", {
        text: "Congratulations!"
      });
      modal.createEl("p", {
        text: "By completing this task you won this reward:"
      });
      modal.createEl("h1", {
        text: "\u2B50 " + this.rewardObject.rewardName + " \u2B50",
        cls: "rewardName"
      });
      modal.createEl("img", {
        attr: {
          src: this.rewardObject.imageLink
        }
      });
      modal.createEl("h2", {
        text: "\u{1F388} \u{1F389} \u{1F388}"
      });
      modal.createEl("button", {
        attr: { type: "button" },
        text: "Skip this reward"
      }).addEventListener("click", () => {
        this.modifier = 0;
        this.close();
      });
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZS9kaXN0L21haW4uanMiLCAibWFpbi50cyIsICJzZXR0aW5ncy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgb2JzaWRpYW4gPSByZXF1aXJlKCdvYnNpZGlhbicpO1xuXG5jb25zdCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUID0gXCJZWVlZLU1NLUREXCI7XG5jb25zdCBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCA9IFwiZ2dnZy1bV113d1wiO1xuY29uc3QgREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUID0gXCJZWVlZLU1NXCI7XG5jb25zdCBERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1bUV1RXCI7XG5jb25zdCBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWVwiO1xuXG5mdW5jdGlvbiBzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MocGVyaW9kaWNpdHkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSB3aW5kb3cuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8uW3BlcmlvZGljaXR5XT8uZW5hYmxlZDtcbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBkYWlseS1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgeyBpbnRlcm5hbFBsdWdpbnMsIHBsdWdpbnMgfSA9IHdpbmRvdy5hcHA7XG4gICAgICAgIGlmIChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJkYWlseVwiKSkge1xuICAgICAgICAgICAgY29uc3QgeyBmb3JtYXQsIGZvbGRlciwgdGVtcGxhdGUgfSA9IHBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5kYWlseSB8fCB7fTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQgfHwgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgICAgICBmb2xkZXI6IGZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBmb2xkZXIsIGZvcm1hdCwgdGVtcGxhdGUgfSA9IGludGVybmFsUGx1Z2lucy5nZXRQbHVnaW5CeUlkKFwiZGFpbHktbm90ZXNcIik/Lmluc3RhbmNlPy5vcHRpb25zIHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQgfHwgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIGRhaWx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHdlZWtseS1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgICAgIGNvbnN0IGNhbGVuZGFyU2V0dGluZ3MgPSBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcImNhbGVuZGFyXCIpPy5vcHRpb25zO1xuICAgICAgICBjb25zdCBwZXJpb2RpY05vdGVzU2V0dGluZ3MgPSBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ud2Vla2x5O1xuICAgICAgICBpZiAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwid2Vla2x5XCIpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgICAgICBmb2xkZXI6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBwZXJpb2RpY05vdGVzU2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGNhbGVuZGFyU2V0dGluZ3MgfHwge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLndlZWtseU5vdGVGb3JtYXQgfHwgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLndlZWtseU5vdGVGb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLndlZWtseU5vdGVUZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHdlZWtseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBwZXJpb2RpYy1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwibW9udGhseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/Lm1vbnRobHkpIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIG1vbnRobHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwicXVhcnRlcmx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ucXVhcnRlcmx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHF1YXJ0ZXJseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBwZXJpb2RpYy1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJ5ZWFybHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy55ZWFybHkpIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20geWVhcmx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuXG4vLyBDcmVkaXQ6IEBjcmVhdGlvbml4L3BhdGguanNcbmZ1bmN0aW9uIGpvaW4oLi4ucGFydFNlZ21lbnRzKSB7XG4gICAgLy8gU3BsaXQgdGhlIGlucHV0cyBpbnRvIGEgbGlzdCBvZiBwYXRoIGNvbW1hbmRzLlxuICAgIGxldCBwYXJ0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gcGFydFNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBwYXJ0cyA9IHBhcnRzLmNvbmNhdChwYXJ0U2VnbWVudHNbaV0uc3BsaXQoXCIvXCIpKTtcbiAgICB9XG4gICAgLy8gSW50ZXJwcmV0IHRoZSBwYXRoIGNvbW1hbmRzIHRvIGdldCB0aGUgbmV3IHJlc29sdmVkIHBhdGguXG4gICAgY29uc3QgbmV3UGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHNbaV07XG4gICAgICAgIC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzXG4gICAgICAgIC8vIEFsc28gcmVtb3ZlIFwiLlwiIHNlZ21lbnRzXG4gICAgICAgIGlmICghcGFydCB8fCBwYXJ0ID09PSBcIi5cIilcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAvLyBQdXNoIG5ldyBwYXRoIHNlZ21lbnRzLlxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cbiAgICAvLyBQcmVzZXJ2ZSB0aGUgaW5pdGlhbCBzbGFzaCBpZiB0aGVyZSB3YXMgb25lLlxuICAgIGlmIChwYXJ0c1swXSA9PT0gXCJcIilcbiAgICAgICAgbmV3UGFydHMudW5zaGlmdChcIlwiKTtcbiAgICAvLyBUdXJuIGJhY2sgaW50byBhIHNpbmdsZSBzdHJpbmcgcGF0aC5cbiAgICByZXR1cm4gbmV3UGFydHMuam9pbihcIi9cIik7XG59XG5mdW5jdGlvbiBiYXNlbmFtZShmdWxsUGF0aCkge1xuICAgIGxldCBiYXNlID0gZnVsbFBhdGguc3Vic3RyaW5nKGZ1bGxQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgIGlmIChiYXNlLmxhc3RJbmRleE9mKFwiLlwiKSAhPSAtMSlcbiAgICAgICAgYmFzZSA9IGJhc2Uuc3Vic3RyaW5nKDAsIGJhc2UubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICByZXR1cm4gYmFzZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyhwYXRoKSB7XG4gICAgY29uc3QgZGlycyA9IHBhdGgucmVwbGFjZSgvXFxcXC9nLCBcIi9cIikuc3BsaXQoXCIvXCIpO1xuICAgIGRpcnMucG9wKCk7IC8vIHJlbW92ZSBiYXNlbmFtZVxuICAgIGlmIChkaXJzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBkaXIgPSBqb2luKC4uLmRpcnMpO1xuICAgICAgICBpZiAoIXdpbmRvdy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRpcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHdpbmRvdy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGRpcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXROb3RlUGF0aChkaXJlY3RvcnksIGZpbGVuYW1lKSB7XG4gICAgaWYgKCFmaWxlbmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICBmaWxlbmFtZSArPSBcIi5tZFwiO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gb2JzaWRpYW4ubm9ybWFsaXplUGF0aChqb2luKGRpcmVjdG9yeSwgZmlsZW5hbWUpKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aCk7XG4gICAgcmV0dXJuIHBhdGg7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpIHtcbiAgICBjb25zdCB7IG1ldGFkYXRhQ2FjaGUsIHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgodGVtcGxhdGUpO1xuICAgIGlmICh0ZW1wbGF0ZVBhdGggPT09IFwiL1wiKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW1wiXCIsIG51bGxdKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVGaWxlID0gbWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdCh0ZW1wbGF0ZVBhdGgsIFwiXCIpO1xuICAgICAgICBjb25zdCBjb250ZW50cyA9IGF3YWl0IHZhdWx0LmNhY2hlZFJlYWQodGVtcGxhdGVGaWxlKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgSUZvbGRJbmZvID0gd2luZG93LmFwcC5mb2xkTWFuYWdlci5sb2FkKHRlbXBsYXRlRmlsZSk7XG4gICAgICAgIHJldHVybiBbY29udGVudHMsIElGb2xkSW5mb107XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHJlYWQgdGhlIGRhaWx5IG5vdGUgdGVtcGxhdGUgJyR7dGVtcGxhdGVQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiRmFpbGVkIHRvIHJlYWQgdGhlIGRhaWx5IG5vdGUgdGVtcGxhdGVcIik7XG4gICAgICAgIHJldHVybiBbXCJcIiwgbnVsbF07XG4gICAgfVxufVxuXG4vKipcbiAqIGRhdGVVSUQgaXMgYSB3YXkgb2Ygd2Vla2x5IGlkZW50aWZ5aW5nIGRhaWx5L3dlZWtseS9tb250aGx5IG5vdGVzLlxuICogVGhleSBhcmUgcHJlZml4ZWQgd2l0aCB0aGUgZ3JhbnVsYXJpdHkgdG8gYXZvaWQgYW1iaWd1aXR5LlxuICovXG5mdW5jdGlvbiBnZXREYXRlVUlEKGRhdGUsIGdyYW51bGFyaXR5ID0gXCJkYXlcIikge1xuICAgIGNvbnN0IHRzID0gZGF0ZS5jbG9uZSgpLnN0YXJ0T2YoZ3JhbnVsYXJpdHkpLmZvcm1hdCgpO1xuICAgIHJldHVybiBgJHtncmFudWxhcml0eX0tJHt0c31gO1xufVxuZnVuY3Rpb24gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC9cXFtbXlxcXV0qXFxdL2csIFwiXCIpOyAvLyByZW1vdmUgZXZlcnl0aGluZyB3aXRoaW4gYnJhY2tldHNcbn1cbi8qKlxuICogWFhYOiBXaGVuIHBhcnNpbmcgZGF0ZXMgdGhhdCBjb250YWluIGJvdGggd2VlayBudW1iZXJzIGFuZCBtb250aHMsXG4gKiBNb21lbnQgY2hvc2VzIHRvIGlnbm9yZSB0aGUgd2VlayBudW1iZXJzLiBGb3IgdGhlIHdlZWsgZGF0ZVVJRCwgd2VcbiAqIHdhbnQgdGhlIG9wcG9zaXRlIGJlaGF2aW9yLiBTdHJpcCB0aGUgTU1NIGZyb20gdGhlIGZvcm1hdCB0byBwYXRjaC5cbiAqL1xuZnVuY3Rpb24gaXNGb3JtYXRBbWJpZ3VvdXMoZm9ybWF0LCBncmFudWxhcml0eSkge1xuICAgIGlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgY29uc3QgY2xlYW5Gb3JtYXQgPSByZW1vdmVFc2NhcGVkQ2hhcmFjdGVycyhmb3JtYXQpO1xuICAgICAgICByZXR1cm4gKC93ezEsMn0vaS50ZXN0KGNsZWFuRm9ybWF0KSAmJlxuICAgICAgICAgICAgKC9NezEsNH0vLnRlc3QoY2xlYW5Gb3JtYXQpIHx8IC9EezEsNH0vLnRlc3QoY2xlYW5Gb3JtYXQpKSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldERhdGVGcm9tRmlsZShmaWxlLCBncmFudWxhcml0eSkge1xuICAgIHJldHVybiBnZXREYXRlRnJvbUZpbGVuYW1lKGZpbGUuYmFzZW5hbWUsIGdyYW51bGFyaXR5KTtcbn1cbmZ1bmN0aW9uIGdldERhdGVGcm9tUGF0aChwYXRoLCBncmFudWxhcml0eSkge1xuICAgIHJldHVybiBnZXREYXRlRnJvbUZpbGVuYW1lKGJhc2VuYW1lKHBhdGgpLCBncmFudWxhcml0eSk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbUZpbGVuYW1lKGZpbGVuYW1lLCBncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGdldFNldHRpbmdzID0ge1xuICAgICAgICBkYXk6IGdldERhaWx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB3ZWVrOiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIG1vbnRoOiBnZXRNb250aGx5Tm90ZVNldHRpbmdzLFxuICAgICAgICBxdWFydGVyOiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHllYXI6IGdldFllYXJseU5vdGVTZXR0aW5ncyxcbiAgICB9O1xuICAgIGNvbnN0IGZvcm1hdCA9IGdldFNldHRpbmdzW2dyYW51bGFyaXR5XSgpLmZvcm1hdC5zcGxpdChcIi9cIikucG9wKCk7XG4gICAgY29uc3Qgbm90ZURhdGUgPSB3aW5kb3cubW9tZW50KGZpbGVuYW1lLCBmb3JtYXQsIHRydWUpO1xuICAgIGlmICghbm90ZURhdGUuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoaXNGb3JtYXRBbWJpZ3VvdXMoZm9ybWF0LCBncmFudWxhcml0eSkpIHtcbiAgICAgICAgaWYgKGdyYW51bGFyaXR5ID09PSBcIndlZWtcIikge1xuICAgICAgICAgICAgY29uc3QgY2xlYW5Gb3JtYXQgPSByZW1vdmVFc2NhcGVkQ2hhcmFjdGVycyhmb3JtYXQpO1xuICAgICAgICAgICAgaWYgKC93ezEsMn0vaS50ZXN0KGNsZWFuRm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cubW9tZW50KGZpbGVuYW1lLCBcbiAgICAgICAgICAgICAgICAvLyBJZiBmb3JtYXQgY29udGFpbnMgd2VlaywgcmVtb3ZlIGRheSAmIG1vbnRoIGZvcm1hdHRpbmdcbiAgICAgICAgICAgICAgICBmb3JtYXQucmVwbGFjZSgvTXsxLDR9L2csIFwiXCIpLnJlcGxhY2UoL0R7MSw0fS9nLCBcIlwiKSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub3RlRGF0ZTtcbn1cblxuY2xhc3MgRGFpbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlRGFpbHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCBhcHAgPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IGFwcDtcbiAgICBjb25zdCBtb21lbnQgPSB3aW5kb3cubW9tZW50O1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIG1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnllc3RlcmRheVxccyp9fS9naSwgZGF0ZS5jbG9uZSgpLnN1YnRyYWN0KDEsIFwiZGF5XCIpLmZvcm1hdChmb3JtYXQpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRvbW9ycm93XFxzKn19L2dpLCBkYXRlLmNsb25lKCkuYWRkKDEsIFwiZFwiKS5mb3JtYXQoZm9ybWF0KSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXREYWlseU5vdGUoZGF0ZSwgZGFpbHlOb3Rlcykge1xuICAgIHJldHVybiBkYWlseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJkYXlcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxEYWlseU5vdGVzKCkge1xuICAgIC8qKlxuICAgICAqIEZpbmQgYWxsIGRhaWx5IG5vdGVzIGluIHRoZSBkYWlseSBub3RlIGZvbGRlclxuICAgICAqL1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldERhaWx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgZGFpbHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghZGFpbHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgRGFpbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIGRhaWx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgY29uc3QgZGFpbHlOb3RlcyA9IHt9O1xuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihkYWlseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwiZGF5XCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcImRheVwiKTtcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkYWlseU5vdGVzO1xufVxuXG5jbGFzcyBXZWVrbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbmZ1bmN0aW9uIGdldERheXNPZldlZWsoKSB7XG4gICAgY29uc3QgeyBtb21lbnQgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGxldCB3ZWVrU3RhcnQgPSBtb21lbnQubG9jYWxlRGF0YSgpLl93ZWVrLmRvdztcbiAgICBjb25zdCBkYXlzT2ZXZWVrID0gW1xuICAgICAgICBcInN1bmRheVwiLFxuICAgICAgICBcIm1vbmRheVwiLFxuICAgICAgICBcInR1ZXNkYXlcIixcbiAgICAgICAgXCJ3ZWRuZXNkYXlcIixcbiAgICAgICAgXCJ0aHVyc2RheVwiLFxuICAgICAgICBcImZyaWRheVwiLFxuICAgICAgICBcInNhdHVyZGF5XCIsXG4gICAgXTtcbiAgICB3aGlsZSAod2Vla1N0YXJ0KSB7XG4gICAgICAgIGRheXNPZldlZWsucHVzaChkYXlzT2ZXZWVrLnNoaWZ0KCkpO1xuICAgICAgICB3ZWVrU3RhcnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIGRheXNPZldlZWs7XG59XG5mdW5jdGlvbiBnZXREYXlPZldlZWtOdW1lcmljYWxWYWx1ZShkYXlPZldlZWtOYW1lKSB7XG4gICAgcmV0dXJuIGdldERheXNPZldlZWsoKS5pbmRleE9mKGRheU9mV2Vla05hbWUudG9Mb3dlckNhc2UoKSk7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVXZWVrbHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihzdW5kYXl8bW9uZGF5fHR1ZXNkYXl8d2VkbmVzZGF5fHRodXJzZGF5fGZyaWRheXxzYXR1cmRheSlcXHMqOiguKj8pfX0vZ2ksIChfLCBkYXlPZldlZWssIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF5ID0gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRlLndlZWtkYXkoZGF5KS5mb3JtYXQobW9tZW50Rm9ybWF0LnRyaW0oKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFdlZWtseU5vdGUoZGF0ZSwgd2Vla2x5Tm90ZXMpIHtcbiAgICByZXR1cm4gd2Vla2x5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcIndlZWtcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxXZWVrbHlOb3RlcygpIHtcbiAgICBjb25zdCB3ZWVrbHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4gd2Vla2x5Tm90ZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFdlZWtseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHdlZWtseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCF3ZWVrbHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgV2Vla2x5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCB3ZWVrbHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4od2Vla2x5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJ3ZWVrXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcIndlZWtcIik7XG4gICAgICAgICAgICAgICAgd2Vla2x5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHdlZWtseU5vdGVzO1xufVxuXG5jbGFzcyBNb250aGx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1vbnRobHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TW9udGhseU5vdGUoZGF0ZSwgbW9udGhseU5vdGVzKSB7XG4gICAgcmV0dXJuIG1vbnRobHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwibW9udGhcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxNb250aGx5Tm90ZXMoKSB7XG4gICAgY29uc3QgbW9udGhseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4gbW9udGhseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgbW9udGhseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCFtb250aGx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IE1vbnRobHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIG1vbnRobHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4obW9udGhseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwibW9udGhcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwibW9udGhcIik7XG4gICAgICAgICAgICAgICAgbW9udGhseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtb250aGx5Tm90ZXM7XG59XG5cbmNsYXNzIFF1YXJ0ZXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVRdWFydGVybHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRRdWFydGVybHlOb3RlKGRhdGUsIHF1YXJ0ZXJseSkge1xuICAgIHJldHVybiBxdWFydGVybHlbZ2V0RGF0ZVVJRChkYXRlLCBcInF1YXJ0ZXJcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxRdWFydGVybHlOb3RlcygpIHtcbiAgICBjb25zdCBxdWFydGVybHkgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHF1YXJ0ZXJseTtcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgcXVhcnRlcmx5Rm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCFxdWFydGVybHlGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFF1YXJ0ZXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgcXVhcnRlcmx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHF1YXJ0ZXJseUZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcInF1YXJ0ZXJcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwicXVhcnRlclwiKTtcbiAgICAgICAgICAgICAgICBxdWFydGVybHlbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHF1YXJ0ZXJseTtcbn1cblxuY2xhc3MgWWVhcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVllYXJseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFllYXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFllYXJseU5vdGUoZGF0ZSwgeWVhcmx5Tm90ZXMpIHtcbiAgICByZXR1cm4geWVhcmx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcInllYXJcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxZZWFybHlOb3RlcygpIHtcbiAgICBjb25zdCB5ZWFybHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4geWVhcmx5Tm90ZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFllYXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHllYXJseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCF5ZWFybHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgWWVhcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCB5ZWFybHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4oeWVhcmx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcInllYXJcIik7XG4gICAgICAgICAgICAgICAgeWVhcmx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHllYXJseU5vdGVzO1xufVxuXG5mdW5jdGlvbiBhcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBkYWlseU5vdGVzUGx1Z2luID0gYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zW1wiZGFpbHktbm90ZXNcIl07XG4gICAgaWYgKGRhaWx5Tm90ZXNQbHVnaW4gJiYgZGFpbHlOb3Rlc1BsdWdpbi5lbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5kYWlseT8uZW5hYmxlZDtcbn1cbi8qKlxuICogWFhYOiBcIldlZWtseSBOb3Rlc1wiIGxpdmUgaW4gZWl0aGVyIHRoZSBDYWxlbmRhciBwbHVnaW4gb3IgdGhlIHBlcmlvZGljLW5vdGVzIHBsdWdpbi5cbiAqIENoZWNrIGJvdGggdW50aWwgdGhlIHdlZWtseSBub3RlcyBmZWF0dXJlIGlzIHJlbW92ZWQgZnJvbSB0aGUgQ2FsZW5kYXIgcGx1Z2luLlxuICovXG5mdW5jdGlvbiBhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaWYgKGFwcC5wbHVnaW5zLmdldFBsdWdpbihcImNhbGVuZGFyXCIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy53ZWVrbHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBhcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5tb250aGx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5xdWFydGVybHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LnllYXJseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGdldFBlcmlvZGljTm90ZVNldHRpbmdzKGdyYW51bGFyaXR5KSB7XG4gICAgY29uc3QgZ2V0U2V0dGluZ3MgPSB7XG4gICAgICAgIGRheTogZ2V0RGFpbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHdlZWs6IGdldFdlZWtseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgbW9udGg6IGdldE1vbnRobHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHF1YXJ0ZXI6IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgeWVhcjogZ2V0WWVhcmx5Tm90ZVNldHRpbmdzLFxuICAgIH1bZ3JhbnVsYXJpdHldO1xuICAgIHJldHVybiBnZXRTZXR0aW5ncygpO1xufVxuZnVuY3Rpb24gY3JlYXRlUGVyaW9kaWNOb3RlKGdyYW51bGFyaXR5LCBkYXRlKSB7XG4gICAgY29uc3QgY3JlYXRlRm4gPSB7XG4gICAgICAgIGRheTogY3JlYXRlRGFpbHlOb3RlLFxuICAgICAgICBtb250aDogY3JlYXRlTW9udGhseU5vdGUsXG4gICAgICAgIHdlZWs6IGNyZWF0ZVdlZWtseU5vdGUsXG4gICAgfTtcbiAgICByZXR1cm4gY3JlYXRlRm5bZ3JhbnVsYXJpdHldKGRhdGUpO1xufVxuXG5leHBvcnRzLkRFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUID0gREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUID0gREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUID0gREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLmFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmNyZWF0ZURhaWx5Tm90ZSA9IGNyZWF0ZURhaWx5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlTW9udGhseU5vdGUgPSBjcmVhdGVNb250aGx5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlUGVyaW9kaWNOb3RlID0gY3JlYXRlUGVyaW9kaWNOb3RlO1xuZXhwb3J0cy5jcmVhdGVRdWFydGVybHlOb3RlID0gY3JlYXRlUXVhcnRlcmx5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlV2Vla2x5Tm90ZSA9IGNyZWF0ZVdlZWtseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVllYXJseU5vdGUgPSBjcmVhdGVZZWFybHlOb3RlO1xuZXhwb3J0cy5nZXRBbGxEYWlseU5vdGVzID0gZ2V0QWxsRGFpbHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsTW9udGhseU5vdGVzID0gZ2V0QWxsTW9udGhseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxRdWFydGVybHlOb3RlcyA9IGdldEFsbFF1YXJ0ZXJseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxXZWVrbHlOb3RlcyA9IGdldEFsbFdlZWtseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxZZWFybHlOb3RlcyA9IGdldEFsbFllYXJseU5vdGVzO1xuZXhwb3J0cy5nZXREYWlseU5vdGUgPSBnZXREYWlseU5vdGU7XG5leHBvcnRzLmdldERhaWx5Tm90ZVNldHRpbmdzID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldERhdGVGcm9tRmlsZSA9IGdldERhdGVGcm9tRmlsZTtcbmV4cG9ydHMuZ2V0RGF0ZUZyb21QYXRoID0gZ2V0RGF0ZUZyb21QYXRoO1xuZXhwb3J0cy5nZXREYXRlVUlEID0gZ2V0RGF0ZVVJRDtcbmV4cG9ydHMuZ2V0TW9udGhseU5vdGUgPSBnZXRNb250aGx5Tm90ZTtcbmV4cG9ydHMuZ2V0TW9udGhseU5vdGVTZXR0aW5ncyA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFBlcmlvZGljTm90ZVNldHRpbmdzID0gZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFF1YXJ0ZXJseU5vdGUgPSBnZXRRdWFydGVybHlOb3RlO1xuZXhwb3J0cy5nZXRRdWFydGVybHlOb3RlU2V0dGluZ3MgPSBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFRlbXBsYXRlSW5mbyA9IGdldFRlbXBsYXRlSW5mbztcbmV4cG9ydHMuZ2V0V2Vla2x5Tm90ZSA9IGdldFdlZWtseU5vdGU7XG5leHBvcnRzLmdldFdlZWtseU5vdGVTZXR0aW5ncyA9IGdldFdlZWtseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0WWVhcmx5Tm90ZSA9IGdldFllYXJseU5vdGU7XG5leHBvcnRzLmdldFllYXJseU5vdGVTZXR0aW5ncyA9IGdldFllYXJseU5vdGVTZXR0aW5ncztcbiIsICJpbXBvcnQge1xyXG4gIEFwcCxcclxuICBkZWJvdW5jZSxcclxuICBFZGl0b3IsXHJcbiAgTWFya2Rvd25WaWV3LFxyXG4gIE1vZGFsLFxyXG4gIG1vbWVudCxcclxuICBOb3RpY2UsXHJcbiAgUGx1Z2luLFxyXG4gIFBsdWdpblNldHRpbmdUYWIsXHJcbiAgU2V0dGluZyxcclxuICBUb2dnbGVDb21wb25lbnQsXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGV4aXQgfSBmcm9tIFwicHJvY2Vzc1wiO1xyXG5cclxuaW1wb3J0IHsgYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCB9IGZyb20gXCJvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHtcclxuICBnZXREYWlseU5vdGUsXHJcbiAgY3JlYXRlRGFpbHlOb3RlLFxyXG4gIGdldEFsbERhaWx5Tm90ZXMsXHJcbn0gZnJvbSBcIm9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZVwiO1xyXG5cclxuaW1wb3J0IHsgT2JzaWRpYW5SZXdhcmRlclNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcclxuXHJcbi8vIEFkZCBcImJhdGNoLW1vZGVcIiB3aGVyZSB0aGVyZSBpcyBvbmx5IGNhbGwtb3V0IHdoZW4gYXdhcmQgd29uIGFuZCB0aGVuIGFsbCBhd2FyZHMgYXJlIHN0b3JlZCBpbiBkYWlseS1ub3RlIG9yIGJhdGNoIGZpbGVcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYWlseU5vdGVGaWxlKCk6IFByb21pc2U8VEZpbGU+IHtcclxuICBjb25zdCBmaWxlID0gZ2V0RGFpbHlOb3RlKG1vbWVudCgpLCBnZXRBbGxEYWlseU5vdGVzKCkpO1xyXG5cclxuICBpZiAoIWZpbGUpIHtcclxuICAgIHJldHVybiBhd2FpdCBjcmVhdGVEYWlseU5vdGUobW9tZW50KCkpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZpbGU7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ic2lkaWFuUmV3YXJkZXIgZXh0ZW5kcyBQbHVnaW4ge1xyXG4gIHNldHRpbmdzOiBPYnNpZGlhblJld2FyZGVyU2V0dGluZ3M7XHJcblxyXG4gIGFzeW5jIGhhbmRsZVJld2FyZChjbGlja2VkVGFza1RleHQpIHtcclxuICAgIGxldCBhcnJheU9mQ2xlYW5lZFJld2FyZHMgPSBbXTtcclxuICAgIGxldCBjaG9zZW5SZXdhcmQ7XHJcbiAgICBsZXQgcmV3YXJkc0J5T2NjdXJyZW5jZSA9IHt9O1xyXG5cclxuICAgIC8vIFJlYWQgY29udGVudHMgb2YgcmV3YXJkcyBmaWxlXHJcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLmFwcDtcclxuICAgIGxldCByZXdhcmRzRmlsZSA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnNldHRpbmdzLnJld2FyZHNGaWxlKTtcclxuXHJcbiAgICBsZXQgY29udGVudHM7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29udGVudHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHJld2FyZHNGaWxlKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICBuZXcgTm90aWNlKFxyXG4gICAgICAgIFwiT2JzaWRpYW4gUmV3YXJkcyBjb3VsZG4ndCBvcGVuIHRoZSByZXdhcmRzIGZpbGUuXFxuUGxlYXNlIGNoZWNrIHRoZSBwYXRoIGluIHRoZSBzZXR0aW5ncy5cIlxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgY2hhciA9IFwiXFxuXCI7XHJcbiAgICBsZXQgeCA9IDA7XHJcbiAgICBsZXQgeSA9IDA7XHJcbiAgICBsZXQgZGlydHlSZXdhcmRzID0gW107XHJcblxyXG4gICAgd2hpbGUgKCh5ID0gY29udGVudHMuaW5kZXhPZihjaGFyLCB4KSkgIT09IC0xKSB7XHJcbiAgICAgIGRpcnR5UmV3YXJkcy5wdXNoKGNvbnRlbnRzLnN1YnN0cmluZyh4LCB5KSk7XHJcbiAgICAgIHggPSB5ICsgMTtcclxuICAgIH1cclxuICAgIGRpcnR5UmV3YXJkcy5wdXNoKGNvbnRlbnRzLnN1YnN0cmluZyh4KSk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHJld2FyZHMgd2l0aCBtZXRhZGF0YVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXJ0eVJld2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZGlydHlSZXdhcmQgPSBkaXJ0eVJld2FyZHNbaV07XHJcblxyXG4gICAgICBsZXQgcmV3YXJkc0xlZnQgPSAxO1xyXG4gICAgICBsZXQgb2NjdXJyZW5jZSA9IHRoaXMuc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzWzBdLmxhYmVsO1xyXG4gICAgICBsZXQgcmV3YXJkTmFtZSA9IFwiXCI7XHJcbiAgICAgIGxldCBpbWFnZUxpbmsgPSBcIlwiO1xyXG4gICAgICBsZXQgbWV0YWRhdGFWYWx1ZXMgPSBbXTtcclxuICAgICAgbGV0IG1ldGFkYXRhU3RhcnQgPSBbXTtcclxuICAgICAgbGV0IG1ldGFkYXRhRW5kID0gW107XHJcbiAgICAgIGxldCBkaXJ0eVJld2FyZFdpdGhQYXJ0aWFsTWV0YWRhdGFTdHJpcHBlZCA9IGRpcnR5UmV3YXJkO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICAvLyBFeHRyYWN0IG1ldGFkYXRhXHJcbiAgICAgICAgbWV0YWRhdGFTdGFydFtpXSA9IGRpcnR5UmV3YXJkV2l0aFBhcnRpYWxNZXRhZGF0YVN0cmlwcGVkLmluZGV4T2YoXHJcbiAgICAgICAgICB0aGlzLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckJlZ2luXHJcbiAgICAgICAgKTtcclxuICAgICAgICBtZXRhZGF0YUVuZFtpXSA9IGRpcnR5UmV3YXJkV2l0aFBhcnRpYWxNZXRhZGF0YVN0cmlwcGVkLmluZGV4T2YoXHJcbiAgICAgICAgICB0aGlzLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckVuZCxcclxuICAgICAgICAgIG1ldGFkYXRhU3RhcnRbaV1cclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChtZXRhZGF0YVN0YXJ0W2ldIDwgMCkge1xyXG4gICAgICAgICAgLy8gSWYgZmlyc3QgbWV0YWRhdGEgbm90IGZvdW5kIHRoZW4gcHV0IGRlZmF1bHQgdmFsdWVzXHJcbiAgICAgICAgICByZXdhcmROYW1lID0gZGlydHlSZXdhcmRXaXRoUGFydGlhbE1ldGFkYXRhU3RyaXBwZWQ7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbWV0YWRhdGFWYWx1ZXNbaV0gPSBkaXJ0eVJld2FyZFdpdGhQYXJ0aWFsTWV0YWRhdGFTdHJpcHBlZC5zdWJzdHJpbmcoXHJcbiAgICAgICAgICAgIG1ldGFkYXRhU3RhcnRbaV0gKyAxLFxyXG4gICAgICAgICAgICBtZXRhZGF0YUVuZFtpXVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgbWV0YWRhdGFWYWx1ZXNbaV0uc3Vic3RyaW5nKDAsIDYpID09PSBcImFwcDovL1wiIHx8XHJcbiAgICAgICAgICBtZXRhZGF0YVZhbHVlc1tpXS5zdWJzdHJpbmcoMCwgNCkgPT09IFwiaHR0cFwiXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpbWFnZUxpbmsgPSBtZXRhZGF0YVZhbHVlc1tpXTtcclxuICAgICAgICB9IGVsc2UgaWYgKC9eXFxkKyQvLnRlc3QobWV0YWRhdGFWYWx1ZXNbaV0pKSB7XHJcbiAgICAgICAgICByZXdhcmRzTGVmdCA9IG1ldGFkYXRhVmFsdWVzW2ldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvY2N1cnJlbmNlID0gbWV0YWRhdGFWYWx1ZXNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpcnR5UmV3YXJkV2l0aFBhcnRpYWxNZXRhZGF0YVN0cmlwcGVkID1cclxuICAgICAgICAgIGRpcnR5UmV3YXJkV2l0aFBhcnRpYWxNZXRhZGF0YVN0cmlwcGVkLnJlcGxhY2UoXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZXNjYXBlQ2hhcmFjdGVyQmVnaW4gK1xyXG4gICAgICAgICAgICAgIG1ldGFkYXRhVmFsdWVzW2ldICtcclxuICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckVuZCxcclxuICAgICAgICAgICAgXCJcIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByZXdhcmRPYmplY3QgPSB7XHJcbiAgICAgICAgZGlydHlSZXdhcmQ6IGRpcnR5UmV3YXJkc1tpXSxcclxuICAgICAgICByZXdhcmROYW1lOiByZXdhcmROYW1lLnJlcGxhY2UoL1xcbnxcXHR8XFxyfC0gfFxcKiB8XFwrIC9nLCBcIlwiKS50cmltKCksXHJcbiAgICAgICAgcmV3YXJkc0xlZnQ6IHJld2FyZHNMZWZ0LFxyXG4gICAgICAgIG9jY3VycmVuY2U6IG9jY3VycmVuY2UsXHJcbiAgICAgICAgaW1hZ2VMaW5rOiBpbWFnZUxpbmssXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChyZXdhcmRPYmplY3QucmV3YXJkc0xlZnQgPiAwKSB7XHJcbiAgICAgICAgLy8gT25seSBhZGQgcmV3YXJkIGlmIHRoZXJlIGlzIGludmVudG9yeVxyXG4gICAgICAgIGFycmF5T2ZDbGVhbmVkUmV3YXJkcy5wdXNoKHJld2FyZE9iamVjdCk7XHJcblxyXG4gICAgICAgIGlmIChyZXdhcmRzQnlPY2N1cnJlbmNlLmhhc093blByb3BlcnR5KG9jY3VycmVuY2UpKSB7XHJcbiAgICAgICAgICByZXdhcmRzQnlPY2N1cnJlbmNlW29jY3VycmVuY2VdLnB1c2gocmV3YXJkT2JqZWN0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV3YXJkc0J5T2NjdXJyZW5jZVtvY2N1cnJlbmNlXSA9IFtdO1xyXG4gICAgICAgICAgcmV3YXJkc0J5T2NjdXJyZW5jZVtvY2N1cnJlbmNlXS5wdXNoKHJld2FyZE9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgd2hhdCByZXdhcmQgdHlwZXMgYXJlIGFjdGl2ZSBhbmQgaG93IG1hbnkgb2YgZWFjaCwgZm9yIGNoYW5jZSBjYWxjdWxhdGlvblxyXG5cclxuICAgIGxldCBmb3VuZE9jY3VyZW5jZVR5cGVzID0ge1xyXG4gICAgICBbdGhpcy5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbMF0ubGFiZWxdOiAwLFxyXG4gICAgICBbdGhpcy5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbMV0ubGFiZWxdOiAwLFxyXG4gICAgICBbdGhpcy5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbMl0ubGFiZWxdOiAwLFxyXG4gICAgfTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlPZkNsZWFuZWRSZXdhcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGZvdW5kT2NjdXJlbmNlVHlwZXNbYXJyYXlPZkNsZWFuZWRSZXdhcmRzW2ldLm9jY3VycmVuY2VdID1cclxuICAgICAgICBmb3VuZE9jY3VyZW5jZVR5cGVzW2FycmF5T2ZDbGVhbmVkUmV3YXJkc1tpXS5vY2N1cnJlbmNlXSArIDE7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2VlIGlmIHdlIHdvbiBhIHJld2FyZFxyXG5cclxuICAgIGxldCBzdW1PZk9jY3VycmVuY2VzID0gMDtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChmb3VuZE9jY3VyZW5jZVR5cGVzW3RoaXMuc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLmxhYmVsXSA+IDApIHtcclxuICAgICAgICBzdW1PZk9jY3VycmVuY2VzICs9IHRoaXMuc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc3VtT2ZPY2N1cnJlbmNlcyA+IDEwMCkge1xyXG4gICAgICAvLyBOZWVkIHRvIGNvbnZlcnQgc28gdG90YWwgaXMgbm8gbW9yZSB0aGFuIDEwMCVcclxuICAgICAgY29uc3QgZGl2aWRlQnlUaGlzVG9HZXRUbzEwMCA9IHN1bU9mT2NjdXJyZW5jZXMgLyAxMDA7XHJcblxyXG4gICAgICBmb3IgKFxyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICBpIDwgT2JqZWN0LmtleXModGhpcy5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXMpLmxlbmd0aDtcclxuICAgICAgICBpKytcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0udmFsdWUgPVxyXG4gICAgICAgICAgdGhpcy5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0udmFsdWUgLyBkaXZpZGVCeVRoaXNUb0dldFRvMTAwO1xyXG4gICAgICB9XHJcbiAgICAgIHN1bU9mT2NjdXJyZW5jZXMgPSB0aGlzLnNldHRpbmdzLm9jY3VycmVuY2VUeXBlcy5yZWR1Y2UoXHJcbiAgICAgICAgKHBhcnRpYWxTdW0sIGEpID0+IHBhcnRpYWxTdW0gKyBhLFxyXG4gICAgICAgIDBcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdW1PZk9jY3VycmVuY2VzID0gc3VtT2ZPY2N1cnJlbmNlcyAqIDEwOyAvLyBUbyBza2lwIGRlY2ltYWwgbnVtYmVyc1xyXG5cclxuICAgIGNvbnN0IGxvdHRlcnlOdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwKTtcclxuXHJcbiAgICBpZiAobG90dGVyeU51bWJlciA+IHN1bU9mT2NjdXJyZW5jZXMpIHtcclxuICAgICAgLy8gRGlkIG5vdCBnZXQgYSByZXdhcmQgYnV0IHN0aWxsIGNoZWNrIGlmIHdlIHNob3VsZCBsb2dcclxuICAgICAgdGhpcy5sb2dUb0RhaWx5Tm90ZShjbGlja2VkVGFza1RleHQsIHt9LCB0cnVlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgcmV3YXJkXHJcblxyXG4gICAgY29uc3Qgb2JqZWN0T2ZPY2N1cnJlbmNlcyA9IHt9O1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNldHRpbmdzLm9jY3VycmVuY2VUeXBlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBvYmplY3RPZk9jY3VycmVuY2VzW3RoaXMuc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLmxhYmVsXSA9XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0udmFsdWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhcnJheU9mT2NjdXJyZW5jZXMgPSBPYmplY3Qua2V5cyhmb3VuZE9jY3VyZW5jZVR5cGVzKTtcclxuXHJcbiAgICBsZXQgY2hlY2tlZFByb2JhYmlsaXRpZXMgPSAwO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlPZk9jY3VycmVuY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBmb3VuZE9jY3VyZW5jZVR5cGVzW2FycmF5T2ZPY2N1cnJlbmNlc1tpXV0gPiAwICYmXHJcbiAgICAgICAgbG90dGVyeU51bWJlciA8XHJcbiAgICAgICAgICBvYmplY3RPZk9jY3VycmVuY2VzW2FycmF5T2ZPY2N1cnJlbmNlc1tpXV0gKiAxMCArIGNoZWNrZWRQcm9iYWJpbGl0aWVzXHJcbiAgICAgICkge1xyXG4gICAgICAgIC8vIENob29zZSBhIHJld2FyZCBhbW9uZyB0aGUgb25lcyB3aXRoaW4gdGhlIHNhbWUgb2NjdXJyZW5jZSBjYXRlZ29yeVxyXG4gICAgICAgIGNvbnN0IHJhbmRvbU51bWJlclRvQ2hvb3NlUmV3YXJkV2l0aGluT2NjdXJlbmNlID0gTWF0aC5mbG9vcihcclxuICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiBmb3VuZE9jY3VyZW5jZVR5cGVzW2FycmF5T2ZPY2N1cnJlbmNlc1tpXV1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNob3NlblJld2FyZCA9XHJcbiAgICAgICAgICByZXdhcmRzQnlPY2N1cnJlbmNlW2FycmF5T2ZPY2N1cnJlbmNlc1tpXV1bXHJcbiAgICAgICAgICAgIHJhbmRvbU51bWJlclRvQ2hvb3NlUmV3YXJkV2l0aGluT2NjdXJlbmNlXHJcbiAgICAgICAgICBdO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNoZWNrZWRQcm9iYWJpbGl0aWVzID1cclxuICAgICAgICBjaGVja2VkUHJvYmFiaWxpdGllcyArIG9iamVjdE9mT2NjdXJyZW5jZXNbYXJyYXlPZk9jY3VycmVuY2VzW2ldXSAqIDEwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNob3cgbm90aWZpY2F0aW9uXHJcblxyXG4gICAgbGV0IG1vZGlmaWVyO1xyXG4gICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd01vZGFsKSB7XHJcbiAgICAgIG1vZGlmaWVyID0gYXdhaXQgZGlzcGxheU1vZGFsKHRoaXMuYXBwLCBjaG9zZW5SZXdhcmQsIHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc3RyaW5nVG9TaG93ID0gdGhpcy5zZXR0aW5ncy51c2VBc0luc3BpcmF0aW9uYWxcclxuICAgICAgICA/IGNob3NlblJld2FyZC5yZXdhcmROYW1lXHJcbiAgICAgICAgOiBcIlx1RDgzQ1x1REY4OCBcdUQ4M0NcdURGODkgXHVEODNDXHVERjg4IENvbmdyYXR1bGF0aW9ucyEgXHVEODNDXHVERjg4IFx1RDgzQ1x1REY4OSBcdUQ4M0NcdURGODhcXG5CeSBjb21wbGV0aW5nIHRoaXMgdGFzayB5b3Ugd29uIHRoaXMgcmV3YXJkOlxcbiBcIiArXHJcbiAgICAgICAgICBcIlx1MkI1MCBcIiArXHJcbiAgICAgICAgICBjaG9zZW5SZXdhcmQucmV3YXJkTmFtZSArXHJcbiAgICAgICAgICBcIiBcdTJCNTBcIjtcclxuICAgICAgbmV3IE5vdGljZShzdHJpbmdUb1Nob3cpO1xyXG4gICAgfVxyXG4gICAgLy8gU3Vic3RyYWN0IHJld2FyZCBxdWFudGl0eVxyXG5cclxuICAgIGxldCBhZGp1c3RlZFJld2FyZDtcclxuXHJcbiAgICBpZiAoY2hvc2VuUmV3YXJkLnJld2FyZHNMZWZ0KSB7XHJcbiAgICAgIGxldCBuZXdSZXdhcmRzTGVmdCA9XHJcbiAgICAgICAgcGFyc2VJbnQoY2hvc2VuUmV3YXJkLnJld2FyZHNMZWZ0KSArIHBhcnNlSW50KG1vZGlmaWVyKTtcclxuICAgICAgYWRqdXN0ZWRSZXdhcmQgPSBjaG9zZW5SZXdhcmQuZGlydHlSZXdhcmQucmVwbGFjZShcclxuICAgICAgICB0aGlzLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckJlZ2luICtcclxuICAgICAgICAgIGNob3NlblJld2FyZC5yZXdhcmRzTGVmdCArXHJcbiAgICAgICAgICB0aGlzLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckVuZCxcclxuICAgICAgICB0aGlzLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckJlZ2luICtcclxuICAgICAgICAgIG5ld1Jld2FyZHNMZWZ0ICtcclxuICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZXNjYXBlQ2hhcmFjdGVyRW5kXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhZGp1c3RlZFJld2FyZCA9IGNob3NlblJld2FyZC5kaXJ0eVJld2FyZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgcmV3YXJkcyBmaWxlXHJcblxyXG4gICAgbGV0IG5ld0NvbnRlbnRzID0gY29udGVudHMucmVwbGFjZShcclxuICAgICAgY2hvc2VuUmV3YXJkLmRpcnR5UmV3YXJkLFxyXG4gICAgICBhZGp1c3RlZFJld2FyZFxyXG4gICAgKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIHZhdWx0Lm1vZGlmeShyZXdhcmRzRmlsZSwgbmV3Q29udGVudHMpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIG5ldyBOb3RpY2UoXCJPYnNpZGlhbiBSZXdhcmRzIGNvdWxkbid0IG1vZGlmeSB0aGUgcmV3YXJkcyBmaWxlLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxvZ1RvRGFpbHlOb3RlKGNsaWNrZWRUYXNrVGV4dCwgY2hvc2VuUmV3YXJkLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2dUb0RhaWx5Tm90ZShjbGlja2VkVGFza1RleHQsIGNob3NlblJld2FyZCwgbG9nVGFza09ubHkpIHtcclxuICAgIC8vIExvZyB0byBkYWlseSBub3RlLCBwYXJ0bHkgdGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20va3pob3ZuL3N0YXR1c2Jhci1wb21vLW9ic2lkaWFuL2Jsb2IvbWFzdGVyL3NyYy90aW1lci50c1xyXG5cclxuICAgIGxldCBsb2dUZXh0ID0gdGhpcy5zZXR0aW5ncy5zYXZlVGFza1RvRGFpbHlcclxuICAgICAgPyB0aGlzLnNldHRpbmdzLmNvbXBsZXRlZFRhc2tDaGFyYWN0ZXIgK1xyXG4gICAgICAgIGNsaWNrZWRUYXNrVGV4dCArXHJcbiAgICAgICAgXCIgKFtbXCIgK1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkuYmFzZW5hbWUgK1xyXG4gICAgICAgIFwiXV0pXCIgK1xyXG4gICAgICAgIFwiIC0gXCIgK1xyXG4gICAgICAgIG1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpXHJcbiAgICAgIDogXCJcIjtcclxuXHJcbiAgICBsb2dUZXh0ID1cclxuICAgICAgbG9nVGV4dCArXHJcbiAgICAgICh0aGlzLnNldHRpbmdzLnNhdmVSZXdhcmRUb0RhaWx5ICYmIGxvZ1Rhc2tPbmx5ID09PSBmYWxzZVxyXG4gICAgICAgID8gKGxvZ1RleHQubGVuZ3RoID4gMCA/IFwiXFxyXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICBcIkVhcm5lZCByZXdhcmQ6IFwiICtcclxuICAgICAgICAgIGNob3NlblJld2FyZC5yZXdhcmROYW1lXHJcbiAgICAgICAgOiBcIlwiKTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICh0aGlzLnNldHRpbmdzLnNhdmVSZXdhcmRUb0RhaWx5ID09PSB0cnVlIHx8XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5zYXZlVGFza1RvRGFpbHkgPT09IHRydWUpICYmXHJcbiAgICAgIGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSA9PT0gdHJ1ZVxyXG4gICAgKSB7XHJcbiAgICAgIGxldCBmaWxlID0gKGF3YWl0IGdldERhaWx5Tm90ZUZpbGUoKSkucGF0aDtcclxuICAgICAgLy9mcm9tIE5vdGUgUmVmYWN0b3IgcGx1Z2luIGJ5IEphbWVzIEx5bmNoLCBodHRwczovL2dpdGh1Yi5jb20vbHluY2hqYW1lcy9ub3RlLXJlZmFjdG9yLW9ic2lkaWFuL2Jsb2IvODBjMWEyM2ExMzUyYjVkMjJjNzBmMWIxZDkxNWI0ZTBhMWIyYjMzZi9zcmMvb2JzaWRpYW4tZmlsZS50cyNMNjlcclxuXHJcbiAgICAgIGxldCBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZSk7XHJcbiAgICAgIGlmIChleGlzdGluZ0NvbnRlbnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGV4aXN0aW5nQ29udGVudCA9IGV4aXN0aW5nQ29udGVudCArIFwiXFxyXCI7XHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlLCBleGlzdGluZ0NvbnRlbnQgKyBsb2dUZXh0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZVNhbXBsZU5vdGUoc2VsZikge1xyXG4gICAgLy8gQ3JlYXRlcyBhIHNhbXBsZSBub3RlIG9mIHJld2FyZHMgdXNpbmcgdGhlIHVzZXIncyBzZXR0aW5nc1xyXG4gICAgbGV0IGZvbGRlciA9IGFwcC5maWxlTWFuYWdlci5nZXROZXdGaWxlUGFyZW50KFwiXCIpO1xyXG4gICAgY29uc3QgY3JlYXRlZE5vdGUgPSBhd2FpdCBhcHAuZmlsZU1hbmFnZXIuY3JlYXRlTmV3TWFya2Rvd25GaWxlKFxyXG4gICAgICBmb2xkZXIsXHJcbiAgICAgIFwiUmV3YXJkcy5tZFwiXHJcbiAgICApO1xyXG4gICAgY29uc3Qgc2FtcGxlQ29udGVudHNGb3JOb3RlID1cclxuICAgICAgXCItIEhhdmUgYSBjdXAgb2YgdGVhXCIgK1xyXG4gICAgICBcIlxcbi0gV2F0Y2ggYW4gZXBpc29kZSBvZiBmYXZvdXJpdGUgc2VyaWVzIFwiICtcclxuICAgICAgc2VsZi5zZXR0aW5ncy5lc2NhcGVDaGFyYWN0ZXJCZWdpbiArXHJcbiAgICAgIHNlbGYuc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzWzFdLmxhYmVsICtcclxuICAgICAgc2VsZi5zZXR0aW5ncy5lc2NhcGVDaGFyYWN0ZXJFbmQgK1xyXG4gICAgICBcIiBcIiArXHJcbiAgICAgIHNlbGYuc2V0dGluZ3MuZXNjYXBlQ2hhcmFjdGVyQmVnaW4gK1xyXG4gICAgICBcIjIwXCIgK1xyXG4gICAgICBzZWxmLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckVuZCArXHJcbiAgICAgIFwiXFxuLSBLbml0IGZvciAxNSBtaW51dGVzIFwiICtcclxuICAgICAgc2VsZi5zZXR0aW5ncy5lc2NhcGVDaGFyYWN0ZXJCZWdpbiArXHJcbiAgICAgIHNlbGYuc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzWzFdLmxhYmVsICtcclxuICAgICAgc2VsZi5zZXR0aW5ncy5lc2NhcGVDaGFyYWN0ZXJFbmQgK1xyXG4gICAgICBcIiBcIiArXHJcbiAgICAgIFwiXFxuLSBPcGVuIHRoZSBiaXJ0aGRheSBwcmVzZW50IGNoYW1wYWduZSBib3R0bGUgXCIgK1xyXG4gICAgICBzZWxmLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckJlZ2luICtcclxuICAgICAgc2VsZi5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbMl0ubGFiZWwgK1xyXG4gICAgICBzZWxmLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckVuZCArXHJcbiAgICAgIFwiIFwiICtcclxuICAgICAgc2VsZi5zZXR0aW5ncy5lc2NhcGVDaGFyYWN0ZXJCZWdpbiArXHJcbiAgICAgIFwiMVwiICtcclxuICAgICAgc2VsZi5zZXR0aW5ncy5lc2NhcGVDaGFyYWN0ZXJFbmQ7XHJcbiAgICBhcHAudmF1bHQubW9kaWZ5KGNyZWF0ZWROb3RlLCBzYW1wbGVDb250ZW50c0Zvck5vdGUpO1xyXG4gICAgbmV3IE5vdGljZShcIkNyZWF0ZWQgZmlsZSBcIiArIGNyZWF0ZWROb3RlLnBhdGgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IE9ic2lkaWFuUmV3YXJkZXJTZXR0aW5ncyh0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiBcImNyZWF0ZS1zYW1wbGUtcmV3YXJkcy1ub3RlXCIsXHJcbiAgICAgIG5hbWU6IFwiQ3JlYXRlIHNhbXBsZSByZXdhcmRzIG5vdGVcIixcclxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVNhbXBsZU5vdGUodGhpcyk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgY2FsbGJhY2sgPSAoZXZ0OiBFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiZcclxuICAgICAgICBldnQudGFyZ2V0LnR5cGUgPT09IFwiY2hlY2tib3hcIiAmJlxyXG4gICAgICAgIGV2dC50YXJnZXQuY2hlY2tlZFxyXG4gICAgICApIHtcclxuICAgICAgICBldnQudGFyZ2V0LnBhcmVudE5vZGUuaW5uZXJUZXh0Lmxlbmd0aCA+IDAgLy8gQ2hlY2sgd2hlcmUgdGFzayBuYW1lIGlzLCBkZXBlbmRzIG9uIGlmIGlzIHVzaW5nIE9ic2lkaWFuIFRhc2tzIG9yIG5vdFxyXG4gICAgICAgICAgPyB0aGlzLmhhbmRsZVJld2FyZChldnQudGFyZ2V0LnBhcmVudE5vZGUuaW5uZXJUZXh0KVxyXG4gICAgICAgICAgOiB0aGlzLmhhbmRsZVJld2FyZChldnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pbm5lclRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2FsbGJhY2ssIHsgY2FwdHVyZTogdHJ1ZSB9KTsgLy8gQWRkaW5nIGxpa2UgdGhpcyBpbnN0ZWFkIG9mIHJlZ2lzdGVyRG9tRXZlbnQgYXMgY2FuJ3QgdXNlIHRoZSBcImNhcHR1cmVcIi1vcHRpb24gd2l0aCBpdC4gQ2FwdHVyZSBuZWVkZWQgYXMgT2JzaWRpYW4tdGFza3Mgc3RvcHMgcHJvcGFnYXRpb24uXHJcblxyXG4gICAgLy8gVGhpcyByZWdpc3RlcnMgdGhlIHVubG9hZCBmdW5jdGlvblxyXG4gICAgdGhpcy5yZWdpc3RlcigoKSA9PlxyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhbGxiYWNrLCB7IGNhcHR1cmU6IHRydWUgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlzcGxheU1vZGFsKFxyXG4gIGFwcDogQXBwLFxyXG4gIHJld2FyZE9iamVjdDogYW55LFxyXG4gIHNldHRpbmdzOiBhbnlcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENvbmdyYXR1bGF0aW9uc01vZGFsKGFwcCwgcmV3YXJkT2JqZWN0LCBzZXR0aW5ncyk7XHJcbiAgICAgIG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShtb2RhbC5tb2RpZmllcik7XHJcbiAgICAgIH07XHJcbiAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmVqZWN0KCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmNsYXNzIENvbmdyYXR1bGF0aW9uc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwdWJsaWMgcmV3YXJkT2JqZWN0OiBhbnksIHB1YmxpYyBzZXR0aW5nczogYW55KSB7XHJcbiAgICBzdXBlcihhcHApO1xyXG4gIH1cclxuXHJcbiAgbW9kaWZpZXI6IG51bWJlciA9IC0xO1xyXG5cclxuICBvbk9wZW4oKSB7XHJcbiAgICBjb25zdCB7IGNvbnRlbnRFbCwgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBtb2RhbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJyZXdhcmRlck1vZGFsXCIgfSk7XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy51c2VBc0luc3BpcmF0aW9uYWwpIHtcclxuICAgICAgbW9kYWwuY3JlYXRlRWwoXCJoMVwiLCB7XHJcbiAgICAgICAgdGV4dDogdGhpcy5yZXdhcmRPYmplY3QucmV3YXJkTmFtZSxcclxuICAgICAgfSk7XHJcbiAgICAgIG1vZGFsLmNyZWF0ZUVsKFwiaW1nXCIsIHtcclxuICAgICAgICBhdHRyOiB7XHJcbiAgICAgICAgICBzcmM6IHRoaXMucmV3YXJkT2JqZWN0LmltYWdlTGluayxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1vZGFsLmNyZWF0ZUVsKFwiaDJcIiwge1xyXG4gICAgICAgIHRleHQ6IFwiQ29uZ3JhdHVsYXRpb25zIVwiLFxyXG4gICAgICB9KTtcclxuICAgICAgbW9kYWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICB0ZXh0OiBcIkJ5IGNvbXBsZXRpbmcgdGhpcyB0YXNrIHlvdSB3b24gdGhpcyByZXdhcmQ6XCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBtb2RhbC5jcmVhdGVFbChcImgxXCIsIHtcclxuICAgICAgICB0ZXh0OiBcIlx1MkI1MCBcIiArIHRoaXMucmV3YXJkT2JqZWN0LnJld2FyZE5hbWUgKyBcIiBcdTJCNTBcIixcclxuICAgICAgICBjbHM6IFwicmV3YXJkTmFtZVwiLFxyXG4gICAgICB9KTtcclxuICAgICAgbW9kYWwuY3JlYXRlRWwoXCJpbWdcIiwge1xyXG4gICAgICAgIGF0dHI6IHtcclxuICAgICAgICAgIHNyYzogdGhpcy5yZXdhcmRPYmplY3QuaW1hZ2VMaW5rLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBtb2RhbC5jcmVhdGVFbChcImgyXCIsIHtcclxuICAgICAgICB0ZXh0OiBcIlx1RDgzQ1x1REY4OCBcdUQ4M0NcdURGODkgXHVEODNDXHVERjg4XCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBtb2RhbFxyXG4gICAgICAgIC5jcmVhdGVFbChcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgICBhdHRyOiB7IHR5cGU6IFwiYnV0dG9uXCIgfSxcclxuICAgICAgICAgIHRleHQ6IFwiU2tpcCB0aGlzIHJld2FyZFwiLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLm1vZGlmaWVyID0gMDtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQ2xvc2UoKSB7XHJcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gIH1cclxufVxyXG4iLCAiaW1wb3J0IHtcclxuICBBcHAsXHJcbiAgZGVib3VuY2UsXHJcbiAgRWRpdG9yLFxyXG4gIE1hcmtkb3duVmlldyxcclxuICBNb2RhbCxcclxuICBOb3RpY2UsXHJcbiAgbm9ybWFsaXplUGF0aCxcclxuICBQbHVnaW4sXHJcbiAgUGx1Z2luU2V0dGluZ1RhYixcclxuICBTZXR0aW5nLFxyXG4gIFRvZ2dsZUNvbXBvbmVudCxcclxufSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgT2JzaWRpYW5SZXdhcmRlclNldHRpbmdzIHtcclxuICBjb21wbGV0ZWRUYXNrQ2hhcmFjdGVyOiBzdHJpbmc7XHJcbiAgZXNjYXBlQ2hhcmFjdGVyQmVnaW46IHN0cmluZztcclxuICBlc2NhcGVDaGFyYWN0ZXJFbmQ6IHN0cmluZztcclxuICBvY2N1cnJlbmNlVHlwZXM6IEFycmF5PG9iamVjdD47XHJcbiAgcmV3YXJkc0ZpbGU6IHN0cmluZztcclxuICBzYXZlUmV3YXJkVG9EYWlseTogYm9vbGVhbjtcclxuICBzYXZlVGFza1RvRGFpbHk6IGJvb2xlYW47XHJcbiAgc2hvd01vZGFsOiBib29sZWFuO1xyXG4gIHVzZUFzSW5zcGlyYXRpb25hbDogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE9ic2lkaWFuUmV3YXJkZXJTZXR0aW5ncyA9IHtcclxuICBjb21wbGV0ZWRUYXNrQ2hhcmFjdGVyOiBcIlx1MjYxMVx1RkUwRlwiLFxyXG4gIGVzY2FwZUNoYXJhY3RlckJlZ2luOiBcIntcIixcclxuICBlc2NhcGVDaGFyYWN0ZXJFbmQ6IFwifVwiLFxyXG4gIG9jY3VycmVuY2VUeXBlczogW1xyXG4gICAgeyBsYWJlbDogXCJjb21tb25cIiwgdmFsdWU6IDIwIH0sXHJcbiAgICB7IGxhYmVsOiBcInJhcmVcIiwgdmFsdWU6IDUgfSxcclxuICAgIHsgbGFiZWw6IFwibGVnZW5kYXJ5XCIsIHZhbHVlOiAwLjUgfSxcclxuICBdLFxyXG4gIHJld2FyZHNGaWxlOiBcIlJld2FyZHMubWRcIixcclxuICBzYXZlUmV3YXJkVG9EYWlseTogZmFsc2UsXHJcbiAgc2F2ZVRhc2tUb0RhaWx5OiBmYWxzZSxcclxuICBzaG93TW9kYWw6IHRydWUsXHJcbiAgdXNlQXNJbnNwaXJhdGlvbmFsOiBmYWxzZSxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBPYnNpZGlhblJld2FyZGVyU2V0dGluZ3MgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICBwbHVnaW46IE9ic2lkaWFuUmV3YXJkZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE9ic2lkaWFuUmV3YXJkZXIpIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gIH1cclxuXHJcbiAgc2FuaXRpc2VOb3RlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgLy8gVGFrZW4gZnJvbSBob21lcGFnZSBwbHVnaW5cclxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZS5tYXRjaCgvXlxccyokLykgIT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9ybWFsaXplUGF0aCh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgIC8vIFNldHRpbmdzIGZvciBmdW5jdGlvbmFsaXR5XHJcblxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiRnVuY3Rpb25hbGl0eSBzZXR0aW5nc1wiIH0pO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRmlsZSB3aXRoIFJld2FyZHNcIilcclxuICAgICAgLnNldERlc2MoJ0ZvciBleGFtcGxlIFwiUmV3YXJkcy5tZFwiIG9yIFwiRm9sZGVyL1Jld2FyZHMubWRcIicpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucmV3YXJkc0ZpbGUpXHJcbiAgICAgICAgICAuc2V0VmFsdWUoXHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJld2FyZHNGaWxlLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICA/IHRoaXMucGx1Z2luLnNldHRpbmdzLnJld2FyZHNGaWxlXHJcbiAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJld2FyZHNGaWxlID1cclxuICAgICAgICAgICAgICB0aGlzLnNhbml0aXNlTm90ZSh2YWx1ZSkgfHwgREVGQVVMVF9TRVRUSU5HUy5yZXdhcmRzRmlsZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTaG93IHBvcHVwIHdoZW4gcmV3YXJkIGlzIGF3YXJkZWRcIilcclxuICAgICAgLnNldERlc2MoXCJJZiBkaXNhYmxlZCBhIGxlc3MgcHJvbWluZW50IG5vdGljZSB3aWxsIGJlIHNob3duIGluc3RlYWRcIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dNb2RhbCk7XHJcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd01vZGFsID0gdmFsdWU7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTYXZlIHJld2FyZHMgaW4gZGFpbHkgbm90ZVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldpbGwgc2F2ZSByZXdhcmRzIHJlY2VpdmVkIHRvIHRoZSBlbmQgb2YgdGhlIGRhaWx5IG5vdGVcIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVSZXdhcmRUb0RhaWx5KTtcclxuICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zYXZlUmV3YXJkVG9EYWlseSA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiU2F2ZSB0YXNrIGluIGRhaWx5IG5vdGVcIilcclxuICAgICAgLnNldERlc2MoXCJXaWxsIHNhdmUgY29tcGxldGVkIHRhc2tzIHRvIHRoZSBlbmQgb2YgdGhlIGRhaWx5IG5vdGVcIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVUYXNrVG9EYWlseSk7XHJcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2F2ZVRhc2tUb0RhaWx5ID0gdmFsdWU7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJVc2Ugd2l0aCBxdW90ZXMgaW5zdGVhZCBvZiByZXdhcmRzXCIpXHJcbiAgICAgIC5zZXREZXNjKFxyXG4gICAgICAgIFwiUmV3YXJkcyBhcmUgc2hvd24gYXMgaW5zcGlyYXRpb25hbCBxdW90ZXMgaW5zdGVhZCBvZiBjb25ncmF0dWxhdGlvbnNcIlxyXG4gICAgICApXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VBc0luc3BpcmF0aW9uYWwpO1xyXG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZUFzSW5zcGlyYXRpb25hbCA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlJld2FyZCBzZXR0aW5nc1wiIH0pO1xyXG5cclxuICAgIC8vIFNldHRpbmdzIGZvciBvY2N1cmVuY2VcclxuXHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcclxuICAgICAgdGV4dDogXCJPY2N1cnJlbmNlIHZhbHVlc1wiLFxyXG4gICAgfSk7XHJcblxyXG4gICAgZm9yIChcclxuICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICBpIDwgT2JqZWN0LmtleXModGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzKS5sZW5ndGg7XHJcbiAgICAgIGkrK1xyXG4gICAgKSB7XHJcbiAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFxyXG4gICAgICAgICAgXCJIb3cgb2Z0ZW4gc2hvdWxkIFwiICtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLmxhYmVsICtcclxuICAgICAgICAgICAgXCIgcmV3YXJkcyBvY2N1cj9cIlxyXG4gICAgICAgIClcclxuICAgICAgICAuc2V0RGVzYyhcclxuICAgICAgICAgIFwiQmV0d2VlbiAwLjElIHRvIDEwMCUgZm9yIGV2ZXJ5IGZpbmlzaGVkIHRhc2tcIiArXHJcbiAgICAgICAgICAgIChpID09PSAwID8gXCIuIFRoaXMgaXMgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHJld2FyZHNcIiA6IFwiXCIpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9IFwibnVtYmVyXCI7XHJcbiAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0udmFsdWUpXHJcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0udmFsdWUudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVmcmVzaERpc3BsYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IDEwMDtcclxuICAgICAgICAgICAgICAgICAgcmVmcmVzaERpc3BsYXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IDAuMSkge1xyXG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuMTtcclxuICAgICAgICAgICAgICAgICAgcmVmcmVzaERpc3BsYXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLnZhbHVlID0gTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZnJlc2hEaXNwbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICAgIGJ1dHRvblxyXG4gICAgICAgICAgICAuc2V0SWNvbihcInJlc2V0XCIpXHJcbiAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0udmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgREVGQVVMVF9TRVRUSU5HUy5vY2N1cnJlbmNlVHlwZXNbaV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXR0aW5ncyBmb3Igb2NjdXJlbmNlIGxhYmVsc1xyXG5cclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwge1xyXG4gICAgICB0ZXh0OiBcIk9jY3VyZW5jZSBsYWJlbHNcIixcclxuICAgIH0pO1xyXG5cclxuICAgIGZvciAoXHJcbiAgICAgIGxldCBpID0gMDtcclxuICAgICAgaSA8IE9iamVjdC5rZXlzKHRoaXMucGx1Z2luLnNldHRpbmdzLm9jY3VycmVuY2VUeXBlcykubGVuZ3RoO1xyXG4gICAgICBpKytcclxuICAgICkge1xyXG4gICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcclxuICAgICAgICAgICdXb3VsZCB5b3UgbGlrZSB0byByZW5hbWUgXCInICtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLmxhYmVsICtcclxuICAgICAgICAgICAgJ1wiPydcclxuICAgICAgICApXHJcbiAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0ubGFiZWwpXHJcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vY2N1cnJlbmNlVHlwZXNbaV0ubGFiZWwpXHJcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLmxhYmVsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+XHJcbiAgICAgICAgICBidXR0b25cclxuICAgICAgICAgICAgLnNldEljb24oXCJyZXNldFwiKVxyXG4gICAgICAgICAgICAuc2V0VG9vbHRpcChcIlJlc3RvcmUgZGVmYXVsdFwiKVxyXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NjdXJyZW5jZVR5cGVzW2ldLmxhYmVsID1cclxuICAgICAgICAgICAgICAgIERFRkFVTFRfU0VUVElOR1Mub2NjdXJyZW5jZVR5cGVzW2ldLmxhYmVsO1xyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0dGluZ3MgZm9yIGVzY2FwZSBjaGFyYWN0ZXJzXHJcblxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7XHJcbiAgICAgIHRleHQ6IFwiU3BlY2lhbCBjaGFyYWN0ZXJzXCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDb21wbGV0ZWQgdGFza1wiKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICBcIlRoaXMgY2hhcmFjdGVyIGlzIHVzZWQgYXMgcHJlZml4IGZvciBjb21wbGV0ZWQgdGFza3MgaW4gdGhlIGRhaWx5IG5vdGVcIlxyXG4gICAgICApXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIntcIilcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21wbGV0ZWRUYXNrQ2hhcmFjdGVyKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbXBsZXRlZFRhc2tDaGFyYWN0ZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICAuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICBidXR0b25cclxuICAgICAgICAgIC5zZXRJY29uKFwicmVzZXRcIilcclxuICAgICAgICAgIC5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXHJcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbXBsZXRlZFRhc2tDaGFyYWN0ZXIgPVxyXG4gICAgICAgICAgICAgIERFRkFVTFRfU0VUVElOR1MuY29tcGxldGVkVGFza0NoYXJhY3RlcjtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTdGFydCBvZiBtZXRhZGF0YVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoaXMgY2hhcmFjdGVyIHNob3dzIHRoZSBzdGFydCBvZiB0aGUgcmV3YXJkJ3MgZGF0YVwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJ7XCIpXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXNjYXBlQ2hhcmFjdGVyQmVnaW4pXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXNjYXBlQ2hhcmFjdGVyQmVnaW4gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICAuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICBidXR0b25cclxuICAgICAgICAgIC5zZXRJY29uKFwicmVzZXRcIilcclxuICAgICAgICAgIC5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXHJcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckJlZ2luID1cclxuICAgICAgICAgICAgICBERUZBVUxUX1NFVFRJTkdTLmVzY2FwZUNoYXJhY3RlckJlZ2luO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRW5kIG9mIG1ldGFkYXRhXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhpcyBjaGFyYWN0ZXIgc2hvd3MgdGhlIGVuZCBvZiB0aGUgcmV3YXJkJ3MgZGF0YVwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIn1cIilcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lc2NhcGVDaGFyYWN0ZXJFbmQpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXNjYXBlQ2hhcmFjdGVyRW5kID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgICAuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICBidXR0b25cclxuICAgICAgICAgIC5zZXRJY29uKFwicmVzZXRcIilcclxuICAgICAgICAgIC5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXHJcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVzY2FwZUNoYXJhY3RlckVuZCA9XHJcbiAgICAgICAgICAgICAgREVGQVVMVF9TRVRUSU5HUy5lc2NhcGVDaGFyYWN0ZXJFbmQ7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFFQSxXQUFPLGVBQWUsU0FBUyxjQUFjLEVBQUUsT0FBTyxLQUFLLENB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QSxRQUNwQixNQUFNO0FBQUEsVUFDSixLQUFLLEtBQUssYUFBYTtBQUFBLFFBQ3pCO0FBQUEsTUFDRixDQUFDO0FBQ0QsWUFBTSxTQUFTLE1BQU07QUFBQSxRQUNuQixNQUFNO0FBQUEsTUFDUixDQUFDO0FBQ0QsWUFDRyxTQUFTLFVBQVU7QUFBQSxRQUNsQixNQUFNLEVBQUUsTUFBTSxTQUFTO0FBQUEsUUFDdkIsTUFBTTtBQUFBLE1BQ1IsQ0FBQyxFQUNBLGlCQUFpQixTQUFTLE1BQU07QUFDL0IsYUFBSyxXQUFXO0FBQ2hCLGFBQUssTUFBTTtBQUFBLE1BQ2IsQ0FBQztBQUFBLElBQ0w7QUFBQSxFQUNGO0FBQUEsRUFFQSxVQUFVO0FBQ1IsVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNsQjtBQUNGOyIsCiAgIm5hbWVzIjogWyJmb3JtYXQiLCAiZm9sZGVyIiwgInRlbXBsYXRlIiwgImNyZWF0ZURhaWx5Tm90ZSIsICJhcHAiLCAibW9tZW50IiwgImdldERhaWx5Tm90ZSIsICJnZXRBbGxEYWlseU5vdGVzIiwgImFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbl9kYWlseV9ub3Rlc19pbnRlcmZhY2UiLCAiYXBwIiwgImkiLCAiYXBwIl0KfQo=
